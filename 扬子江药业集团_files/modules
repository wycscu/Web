_jsload_('AMap.CustomLayer', 'B.o.Fl=B.o.Yb.extend({w:{visible:!0,opacity:1,zIndex:11,rejectMapMask:!1,zooms:[3,20],alwaysRender:!1},A:function(a,b){this.CLASS_NAME=this.CLASS_NAME||"AMap.CustomLayer";g.c.ya(this,b);this.ji=g.g.create("div",null,"amap-e");a&&(this.ji.appendChild(a),a.className="amap-custom");g.a.tb(this,b);this.kf(this.w)},setOpacity:function(a){g.c.add(this,"setOpacity");this.ji&&g.g.Yq(this.ji,a);this.set("opacity",a,!0)},getContainer:function(){g.c.add(this,"getContainer");return this.ji},show:function(){g.c.add(this, "show");this.set("visible",!0)},hide:function(){g.c.add(this,"hide");this.set("visible",!1)},setzIndex:function(a){g.c.add(this,"setzIndex");this.set("zIndex",a,!0);this.ji&&(this.ji.style.zIndex=a)},fg:function(a){this.get("map")||this.set("map",a.B,!0);return new g.o.Fl(this,a)}});window.AMap.CustomLayer=B.o.Fl; B.o.Ow=B.o.Fl.extend({A:function(a,b){this.CLASS_NAME=this.CLASS_NAME||"AMap.GLCustomLayer";arguments.callee.ma.apply(this,arguments)},setzIndex:function(a){g.c.add(this,"setzIndex");this.set("zIndex",a)},fg:function(a){this.get("map")||this.set("map",a.B,!0);return new g.o.Ow(this,a)},setMap:function(a){g.c.add(this,"setMap");var b=this.get("map");a?(b&&a!==b&&b.wk(this),"3D"===a.view.type&&this.set("map",a)):b&&(b.wk(this),this.set("map",null,!0),this.ti=!1,this.kg&&this.kg())}}); window.AMap.GLCustomLayer=B.o.Ow;g.o.Fl=g.o.Yb.extend({A:function(a,b){this.S=a;this.Bj=!0;this.ex=g.a.xb(this);a&&this.bf("opacity visible zIndex zooms container alwaysRender".split(" "),a);this.e=b;this.X("display",b)},le:function(){return{visible:this.get("visible"),zIndex:this.get("zIndex"),Ya:this.get("zooms"),opacity:this.get("opacity"),K:this.get("container"),ey:this.get("alwaysRender")}},x4:function(){return this.S.render},am:function(a){if(g.M.Fl)return new g.M.Fl(this,a)}}); g.o.Ow=g.o.Fl.extend({am:function(){return null},bm:function(a){if(g.Ea.Ow)return new g.Ea.Ow(this,a)},le:function(){return{visible:this.get("visible"),zIndex:this.get("zIndex"),Ya:this.get("zooms"),opacity:this.get("opacity"),K:this.get("container"),ey:this.get("alwaysRender"),Oc:this.Bn()}},Bn:function(){if(this.e.Oc){if(this.S.get("rejectMapMask"))return!1;if(this.S.usa){if(this.S.wg.get("rejectMapMask"))return!1;if(this.S.wg.options["3d"]&&0==this.S.wg.options["3d"].heightScale)return!0}}else return!1}});g.M.Fl=g.M.Yb.extend({yj:function(){return this.f.get("container")},pc:function(a,b){if(this.f){var c=a.P.lb;if(this.Na&&!this.f.S.Dw){if(this.Na===c&&this.Ff===a.P.zoom&&!this.e.it)return;if(!b.ey&&(a.hf||a.fe)){if(!g.g.tg&&a.fe){b.K.style.visibility="hidden";return}var c=Math.pow(2,a.P.zoom-this.Ff),d=a.P.lb.ab(this.Na);d.x<-g.a.Fa/2&&(d.x+=g.a.Fa);d.x>g.a.Fa/2&&(d.x-=g.a.Fa);d=d.kd(this.zm);1!==c&&(b.K.style[g.g.tg]="scale3d("+c+","+c+",1)");b.K.style.top=-d.y*c+"px";b.K.style.left=-d.x*c+"px"; return}}(d=this.f.x4())&&d.call(this.f.S,a);this.f.La||(this.f.La=!0,g.a.Yc(function(){this.f&&(this.f.Jd?this.f.qa("renderComplete"):(this.f.Jd=!0,this.f.qa("complete")))},this));this.Na=c;this.zm=a.P.T;this.Ff=a.P.zoom;b.K.style.zIndex=b.zIndex;b.K.style[g.g.tg]="";b.K.style.top="";b.K.style.left="";b.K.style.height="";b.K.style.visibility="";g.g.Yq(b.K,b.opacity)}}}); ');_jsload_('cvector', 'g.M.canvas.Il=g.M.Vi.extend({A:function(a,b){arguments.callee.ma.apply(this,arguments);var c=this;this.nZ=function(){c.f.pm=!0;c.set("display",0)};this.$g();this.f.X("feature",this,!0)},KHa:function(a,b){return g.I.ah(a,b.Lv)||g.I.ah(a,b.oua)},OR:function(){return this.Za.VU},$g:function(){this.xa=document.createElement("canvas");this.xa.className="amap-layer amap-vectors";this.zb=this.xa.getContext("2d",{alpha:!0});this.nh=this.f.Kc?this.f.Ta:1;this.Za=new g.M.canvas.ed(this.xa,this.nZ,this.nh)}, HEa:function(a,b,c){var d=a.x;a=a.y;return[this.sT*d-b*this.Kg,this.sT*a-c*this.Kg,this.sT*(d+1)+b*this.Kg,this.sT*(a+1)+c*this.Kg]},ZCa:function(){500<this.f.Jv.length&&this.oa.clear();if(!this.oa.xh()&&0!==this.f.Jv.length)for(var a in this.f.Jv)if(this.f.Jv.hasOwnProperty(a)){var b=this.f.Jv[a];if(b.W){var c=b.W.Kd(),d=[];this.oa.forEach(function(a,b){g.I.ah(a[1],c)&&d.push(b)},this);for(b=0;b<d.length;b+=1)this.oa.remove(d[b])}}this.f.Jv=[]},pc:function(a,b){if(this.q8||this.Na!==a.P.lb||this.Na.zoom!== a.P.zoom||this.Na.rotation!==a.P.rotation||this.f.pm||this.e.it||this.e.lR){var c=this.P=a.P,d=this.T=c.T,e=this.f;this.zoom=c.zoom;this.mb=c.lb;this.Dq=a.T;this.rotation=c.rotation;var f=a.P.Ha;this.me=c.me;var h=this.nh;if(!this.Na||this.f.pm||!a.hf&&!a.fe||b.ey&&!a.ba){this.Na=this.mb;this.Na.zoom=this.zoom;this.Na.rotation=this.rotation;this.zm=this.T;this.f.pm=!1;this.Za.nh=h;this.Za.T=a.P.T/h;this.Za.Kg=a.P.Kg/h;this.Za.Dq=a.T;this.Za.ee=[f.kc.x,f.kc.y];this.Za.mb=this.mb;c=this.xa;c.style.display= "none";c.width=Math.round(2*f.Bc.x)*h;c.height=Math.round(2*f.Bc.y)*h;this.zb.clearRect(0,0,c.width,c.height);var k=this.f.qz||0,l=this.f.rz||0,h=Math.max(this.f.Df,k/this.T)+l,k=Math.max(this.f.mg,k/this.T)+l,f=[f.kc.x,f.kc.y,f.Vd.x,f.Vd.y];f[0]-=h*d;f[1]-=k*d;f[2]+=h*d;f[3]+=k*d;h=e.An(f);d=[[f[0],f[1]],[f[2],f[1]],[f[2],f[3]],[f[0],f[3]],[f[0],f[0]]];this.Za.zb.vI=0;this.Za.zb.GE=!1;if(this.f.S.Cj)e=this.f.get("style"),this.Za.o8(h,e)||(this.q8=!0);else{for(var m in h)h.hasOwnProperty(m)&&(h[m].get("visible")|| delete h[m]);e=e.XR(h);m=e.length;this.q8=!1;for(f=0;f<m;f+=1)this.Za.o8(e[f][0],null,d)}c.style.display="block";this.Pe(a)}else this.Pe(a,b,!0)}},Pe:function(){var a=Math.pow(2,this.zoom-this.Na.zoom),b=this.f.Kc?this.f.Ta:1;this.transform={translate:this.mb.ab(this.Na).kd(this.zm/b).add({x:this.xa.width/2,y:this.xa.height/2}),scale:a/b,rotate:0}},yj:function(){return this.xa}});g.M.canvas.ed=g.da.extend({A:function(a,b,c){if(this.xa=a)this.zb=a.getContext("2d");this.MU=3;this.Qb=this.nh=c;this.Ay={};this.M2("white");this.Da={};this.Wt=b},M2:function(a){if(!this.Ay[a]){var b=document.createElement("canvas"),c=24*this.Qb;b.width=c;b.height=c;var d=b.getContext("2d");d.strokeStyle=a;d.lineJoin="round";d.lineWidth=8*this.Qb;d.moveTo(-4,c-4);d.lineTo(c/2,6);d.lineTo(c+4,c-4);d.stroke();return this.Ay[a]=b}return this.Ay[a]},pta:function(a){if(!this.Ay[a]){var b=this,c=document.createElement("img"); c.onload=function(){c.loaded=!0;b.Wt()};c.onerror=function(){c.loaded=!0};c.src=a;return this.Ay[a]=c}return this.Ay[a]},o8:function(a,b,c){var d=!0,e;for(e in a)if(a.hasOwnProperty(e)){var f=a[e],h=f.name.split("-")[0];"circle"===h?d=this.ywa(f,b||f.style):"point"===h?d=this.r8(f,b):"polyline"===h?d=this.lU(f,b||f.style):"polygon"===h||"multipolygon"===h?d=this.jU(f,b||f.style,c):"text"===h&&this.OGa(f,b||f.style)}return d},ywa:function(a,b){var c=this.zb,d=b.strokeColor,e=b.strokeWeight,f=b.strokeOpacity, h=b.fillColor,k=b.fillOpacity,l=b.strokeStyle,m=b.strokeDasharray,n,p=2*Math.PI,q,r;c.setLineDash&&c.setLineDash([]);c.save();if(m)for(var m=m.slice(0),s=0;s<m.length;s+=1)m[s]*=this.Qb;h&&(c.fillStyle=h);d&&(e&&(c.lineWidth=e*this.Qb),c.strokeStyle=d);e=a.fc();e instanceof g.Aa.Pg&&(r=[e]);e=0;for(s=r.length;e<s;e+=1){c.beginPath();q=r[e].za;q=this.lg(q,q[0]);var u=0,u=a.xv?a.get("radius")*this.Qb:a.get("radius")/(this.Dq*Math.cos(Math.PI*a.get("center").Q/180))*this.Qb;c.arc(q[0],q[1],u,0,p,!0); c.closePath();h&&k!==n&&(n=c.globalAlpha=k);c.fill();d&&(f!==n&&(n=c.globalAlpha=f),"dashed"===l?c.setLineDash?(c.setLineDash(m),c.stroke()):c.uoa(q[0],q[1],u,m):c.stroke())}c.restore();return!0},r8:function(a,b){b instanceof Array&&(b="number"===typeof a.hb.style&&b[a.hb.style]?b[a.hb.style]:b[0]);var c=this.zb,d,e,f=0,h=0;d=this.No(b.url);if(!d)return!1;var k=b.size.width*this.Qb,l=b.size.height*this.Qb,f=b.anchor.x*this.Qb,h=b.anchor.y*this.Qb;e=a.fc();e=this.lg(e.za,e.za[0]);var m=b.rotation_; if(0!==m){var n=Math.cos(m),p=Math.sin(m),q=e[0],r=e[1];c.transform(n,p,-p,n,(1-n)*q+p*r,(1-n)*r-p*q)}c.drawImage(d,Math.round(e[0]-f),Math.round(e[1]-h),k,l);0!==m&&c.setTransform(1,0,0,1,0,0);return!0},rD:function(a,b,c){return[(b[0]-a[0])*c+a[0],(b[1]-a[1])*c+a[1]]},lU:function(a,b){var c=this.zb,d,e,f,h,k,l,m,n,p;m=[NaN,NaN,0];var q=[NaN,NaN],r=[NaN,NaN];c.globalAlpha=b.strokeOpacity;d=b.strokeStyle;e=b.strokeDasharray;var s=b.dashOffset||0;s&&(s*=this.Qb);c.lineCap=b.lineCap||"butt";c.lineJoin= b.lineJoin||"round";c.setLineDash&&c.setLineDash([]);c.save();if(e){e=e.slice(0);for(var u=0;u<e.length;u+=1)e[u]*=this.Qb}c.beginPath();f=a.Iw||a.fc();f instanceof g.Aa.rr?h=[f]:f instanceof g.Aa.Tw&&(h=f.he);(u=b.dirImg)?"CANVAS"!==u.tagName&&(u=this.pta(u)):u=this.M2(b.dirColor);var v=b.strokeWeight/u.width*0.8,w=8*b.strokeWeight,t=b.showDir&&u&&u.width,x=[],y=this.RW||f.ev()[0];f=0;for(k=h.length;f<k;f+=1){l=h[f].za;var F=[],C=0;n=0;for(p=l.length;n<p;n+=1)if(m=l[n],m=this.lg(m,y),F.push(m),0=== n)r[0]=m[0],r[1]=m[1],c.moveTo(m[0],m[1]);else if(q[0]=m[0],q[1]=m[1],n===l.length-1||Math.abs(q[0]-r[0])>=this.MU||Math.abs(q[1]-r[1])>=this.MU){if(t){var E=Math.sqrt(Math.pow(q[0]-r[0],2)+Math.pow(q[1]-r[1],2));if(E+C>w){var A=0,A=r,z=q;if(z[0]===A[0])A=z[1]>A[1]?Math.PI:0;else if(z[1]===A[1])A=z[0]>A[0]?Math.PI/2:-Math.PI/2;else{var G=z[0]-A[0],z=z[1]-A[1],A=Math.atan(G/z);0<G&&0<z?A=Math.PI-A:0>G&&0>z?A=-A:0<G&&0>z?A=-A:0>G&&0<z&&(A=Math.PI-A)}for(G=w-C;G<E;)z=this.rD(r,q,G/E),0<z[0]&&z[0]<this.xa.width&& 0<z[1]&&z[1]<this.xa.height&&x.push(z[0],z[1],A),G+=w;C=(E-(w-C))%w}else C+=E}"dashed"!==d||c.setLineDash?c.lineTo(m[0],m[1]):c.EQ(r[0],r[1],m[0],m[1],e);r[0]=q[0];r[1]=q[1]}}"dashed"===d&&c.setLineDash&&(c.setLineDash(e),c.yFa=s);b.isOutline&&(c.strokeStyle=b.outlineColor,c.lineWidth=(b.strokeWeight+2*b.borderWeight)*this.Qb,c.stroke());b.strokeColor&&b.strokeWeight&&(c.strokeStyle=b.strokeColor,c.lineWidth=b.strokeWeight*this.Qb,c.stroke());c.restore();if(x.length)for(d=-u.width/2*v*this.Qb,h=u.width* v*this.Qb,e=0;e<x.length;e+=3)c.save(),c.translate(x[e],x[e+1]),c.rotate(x[e+2]),c.drawImage(u,d,d,h,h),c.restore();return!0},jU:function(a,b,c){var d=this.zb,e=b.strokeColor,f=b.strokeWeight,h=b.strokeOpacity,k=b.fillColor,l=b.fillOpacity,m=b.strokeStyle,n=b.strokeDasharray,p,q,r,s,u,v,w,t;r=[NaN,NaN,0];var x=[NaN,NaN],y=[NaN,NaN];d.setLineDash&&d.setLineDash([]);d.save();if(n)for(n=n.slice(0),r=0;r<n.length;r+=1)n[r]*=this.Qb;e&&(d.strokeStyle=e,f&&(d.lineWidth=f*this.Qb),d.lineCap="butt",d.lineJoin= b.lineJoin||"miter");k&&(d.fillStyle=k);d.beginPath();this.lA={};b=0;a=a.Iw||a.fc();a instanceof g.Aa.Ec?q=[a]:a instanceof g.Aa.xp&&(q=a.he);var F=this.RW||a.ev()[0];a=0;for(f=q.length;a<f;a+=1)if(r=q[a],s=r.Vf,u=s.length,0<u)for(var C=0;C<u;C+=1){var E;v=s[C].za;c&&2<v.length&&(r=F-this.mb.x,r>g.a.Fa/2?c=[[c[0][0]+g.a.Fa,c[0][1]],[c[1][0]+g.a.Fa,c[1][1]],[c[2][0]+g.a.Fa,c[2][1]],[c[3][0]+g.a.Fa,c[3][1]],[c[4][0]+g.a.Fa,c[4][1]]]:r<-g.a.Fa/2&&(c=[[c[0][0]-g.a.Fa,c[0][1]],[c[1][0]-g.a.Fa,c[1][1]], [c[2][0]-g.a.Fa,c[2][1]],[c[3][0]-g.a.Fa,c[3][1]],[c[4][0]-g.a.Fa,c[4][1]]]),v=g.wd.P7(v,c));this.lA[b]=[];w=0;for(t=v.length;w<t;w+=1)if(r=v[w],r=this.lg(r,F),this.lA[b].push(r),0===w)y[0]=NaN,y[1]=NaN,E=[r[0],r[1]],d.moveTo(r[0],r[1]);else if(x[0]=r[0],x[1]=r[1],x[0]!==y[0]||x[1]!==y[1])d.lineTo(r[0],r[1]),y[0]=x[0],y[1]=x[1];b+=1;E&&d.lineTo(E[0],E[1])}d.closePath();k&&(l!==p&&(p=d.globalAlpha=l),d.fill());if(e){h!==p&&(d.globalAlpha=h);if("dashed"===m)if(d.setLineDash)d.setLineDash(n);else{d.beginPath(); for(var A in this.lA)if(this.lA.hasOwnProperty(A))for(k=this.lA[A],l=0,m=k.length;l<m;l+=1)p=l===m-1?0:l+1,c=Math.round(k[l][0]),e=Math.round(k[l][1]),h=Math.round(k[p][0]),p=Math.round(k[p][1]),d.EQ(c,e,h,p,n)}d.stroke()}d.restore();return!0},No:function(a){var b=this.Da[a];if("undefined"===typeof b)b=document.createElement("img"),b.src=a,this.Da[a]=b,b.loaded=!1,g.F.Fj(b,"load",function(){b.loaded=!0;var a=document.createElement("canvas");a.width=b.naturalWidth;a.height=b.naturalHeight;a.getContext("2d").drawImage(b, 0,0);b.canvas=a;this.Wt&&this.Wt()},this);else if(b.loaded)return b.canvas||b},zEa:function(a){a=this.No(a);if(a.pattern)return a.pattern;if(a){var b=this.zb.createPattern(a,"repeat");return a.pattern=b}return null},lg:function(a,b){var c=this.T,d=a[0];if(void 0!==b&&this.mb){var e=b-this.mb.x;e>g.a.Fa/2?d-=g.a.Fa:e<-g.a.Fa/2&&(d+=g.a.Fa)}d=(d-this.ee[0])/c;return[d,(a[1]-this.ee[1])/c]}}); ');_cssload_('AMap.IndoorMap', '.amap-indoor-map .label-canvas{position:absolute;top:0;left:0}.amap-indoor-map .highlight-image-con *{pointer-events:none}.amap-indoormap-floorbar-control{position:absolute;margin:auto 0;bottom:165px;right:12px;width:35px;text-align:center;line-height:1.3em;overflow:hidden;padding:0 2px}.amap-indoormap-floorbar-control .panel-box{background-color:rgba(255,255,255,.9);border-radius:3px;border:1px solid #ccc}.amap-indoormap-floorbar-control .select-dock{position:absolute;top:0;left:0;width:100%;box-sizing:border-box;height:30px;border:solid #4196ff;border-width:0 2px;border-radius:2px;pointer-events:none;background:linear-gradient(to bottom,#f6f8f9 0,#e5ebee 50%,#d7dee3 51%,#f5f7f9 100%)}.amap-indoor-map .transition{transition:opacity .2s},.amap-indoormap-floorbar-control .transition{transition:top .2s,margin-top .2s}.amap-indoormap-floorbar-control .select-dock:after,.amap-indoormap-floorbar-control .select-dock:before{content:"";position:absolute;width:0;height:0;left:0;top:10px;border:solid transparent;border-width:4px;border-left-color:#4196ff}.amap-indoormap-floorbar-control .select-dock:after{right:0;left:auto;border-left-color:transparent;border-right-color:#4196ff}.amap-indoormap-floorbar-control.is-mobile{width:37px}.amap-indoormap-floorbar-control.is-mobile .floor-btn{height:35px;line-height:35px}.amap-indoormap-floorbar-control.is-mobile .select-dock{height:35px;top:36px}.amap-indoormap-floorbar-control.is-mobile .select-dock:after,.amap-indoormap-floorbar-control.is-mobile .select-dock:before{top:13px}.amap-indoormap-floorbar-control.is-mobile .floor-list-box{height:105px}.amap-indoormap-floorbar-control .floor-list-item .floor-btn{color:#555;font-family:"Times New Roman",sans-serif,"Microsoft Yahei";font-size:16px}.amap-indoormap-floorbar-control .floor-list-item.selected .floor-btn{color:#000}.amap-indoormap-floorbar-control .floor-btn{height:28px;line-height:28px;overflow:hidden;cursor:pointer;position:relative;-webkit-touch-callout:none;-webkit-user-select:none;-khtml-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.amap-indoormap-floorbar-control .floor-btn:hover{background-color:rgba(221,221,221,.4)}.amap-indoormap-floorbar-control .floor-minus,.amap-indoormap-floorbar-control .floor-plus{position:relative;text-indent:-1000em}.amap-indoormap-floorbar-control .floor-minus:after,.amap-indoormap-floorbar-control .floor-plus:after{content:"";position:absolute;margin:auto;top:9px;left:0;right:0;width:0;height:0;border:solid transparent;border-width:10px 8px;border-top-color:#777}.amap-indoormap-floorbar-control .floor-minus.disabled,.amap-indoormap-floorbar-control .floor-plus.disabled{opacity:.3}.amap-indoormap-floorbar-control .floor-plus:after{border-bottom-color:#777;border-top-color:transparent;top:-3px}.amap-indoormap-floorbar-control .floor-list-box{max-height:153px;position:relative;overflow-y:hidden}.amap-indoormap-floorbar-control .floor-list{margin:0;padding:0;list-style:none}.amap-indoormap-floorbar-control .floor-list-item{position:relative}.amap-indoormap-floorbar-control .floor-btn.disabled,.amap-indoormap-floorbar-control .floor-btn.disabled *,.amap-indoormap-floorbar-control.with-indrm-loader *{-webkit-pointer-events:none!important;pointer-events:none!important}.amap-indoormap-floorbar-control .with-indrm-loader .floor-nonas{opacity:.5}.amap-indoor-map-moverf-marker{color:#555;background-color:#FFFEEF;border:1px solid #7E7E7E;padding:3px 6px;font-size:12px;white-space:nowrap;display:inline-block;position:absolute;top:1em;left:1.2em}.amap-indoormap-floorbar-control .amap-indrm-loader{-moz-animation:amap-indrm-loader 1250ms infinite linear;-webkit-animation:amap-indrm-loader 1250ms infinite linear;animation:amap-indrm-loader 1250ms infinite linear;border:2px solid #91A3D8;border-right-color:transparent;box-sizing:border-box;display:inline-block;overflow:hidden;text-indent:-9999px;width:13px;height:13px;border-radius:7px;position:absolute;margin:auto;top:0;left:0;right:0;bottom:0}@-moz-keyframes amap-indrm-loader{0%{-moz-transform:rotate(0deg);transform:rotate(0deg)}100%{-moz-transform:rotate(360deg);transform:rotate(360deg)}}@-webkit-keyframes amap-indrm-loader{0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}100%{-webkit-transform:rotate(360deg);transform:rotate(360deg)}}@keyframes amap-indrm-loader{0%{-moz-transform:rotate(0deg);-ms-transform:rotate(0deg);-webkit-transform:rotate(0deg);transform:rotate(0deg)}100%{-moz-transform:rotate(360deg);-ms-transform:rotate(360deg);-webkit-transform:rotate(360deg);transform:rotate(360deg)}}');_jsload_('AMap.IndoorMap', 'g.Faa=g.da.extend({ka:[g.va],A:function(a){this.gx=g.extend({size:120,l9:0.7,t3:2,k9:300},a);this.Tj={};this.Cp=0;this.DM=this.gx.size},Yba:function(a){return{If:a,MP:g.a.hg(),QH:0}},get:function(a,b){if(!this.Ld(a))return b;var c=this.Tj[a];c.MP=g.a.hg();c.QH+=1;return c.If},forEach:function(a,b){for(var c in this.Tj)if(this.Tj.hasOwnProperty(c)&&!1===a.call(b,this.Tj[c].If,c))break},tK:function(a,b){return this.get(a,b)},set:function(a,b){this.Ld(a)?this.Tj[a].If=b:(this.Cp+=1,this.Tj[a]=this.Yba(b)); this.Cp>this.DM&&this.$ba()},Ld:function(a){return this.Tj.hasOwnProperty(a)},yw:function(a){if(!this.Ld(a))return null;this.Cp-=1;var b=this.Tj[a];delete this.Tj[a];return b.If},clear:function(){this.wM();this.Tj={};this.Cp=0},wM:function(){this.EM&&clearTimeout(this.EM)},$ba:function(){if(this.Cp>this.DM*this.gx.t3)this.wM(),this.bX();else if(!(10>g.a.hg()-this.bca)){this.wM();var a=this;this.EM=setTimeout(function(){a.EM=null;a.bX()},this.gx.k9);this.bca=g.a.hg()}},bX:function(){var a=Math.round(this.DM* this.gx.l9);if(!(this.Cp<a))for(var a=this.Uba(this.Cp-a),b,c,d=0,e=a.length;d<e;d+=1)b=a[d],c=this.yw(b),this.q("drop",{key:b,If:c})},Qba:function(a,b){var c=this.Tj[a],d=this.Tj[b],e=c.MP-d.MP;return 0!==e?e:c.QH-d.QH},Uba:function(a){var b=[],c;for(c in this.Tj)this.Tj.hasOwnProperty(c)&&b.push(c);return this.Vba(b,a,this.Qba)},Vba:function(a,b,c){if(0>=b)return[];for(var d=0,e=a.length-1,f,h,k;d<e;){f=d;h=e;for(k=a[b];f<=b&&h>=b;){for(;f<=b&&0>c.call(this,a[f],k);)f+=1;for(;h>=b&&0<c.call(this, a[h],k);)h-=1;var l=a[f];a[f]=a[h];a[h]=l;f+=1;h-=1}h<b&&(d=f);f>b&&(e=h)}return a.slice(0,b)}});g.Qw={GQ:function(a){g.g.eb(a,"transition")},iT:"function"!==typeof Object.create?function(){function a(){}return function(b){a.prototype=b;b=new a;a.prototype=null;return b}}():Object.create,N1:function(a,b){var c=this.rla;c||(c=this.rla=this.Efa());if(!1!==c){this.GQ(a);var d,e=this,f=function k(){clearTimeout(d);e.GQ(a);g.F.G(a,c,k,e)};d=setTimeout(f,b||1E3);g.g.Wa(a,"transition");g.F.Fj(a,c,f,this)}},Efa:function(){var a,b=document.createElement("fakeelement"),c={transition:"transitionend",OTransition:"oTransitionEnd", MozTransition:"transitionend",WebkitTransition:"webkitTransitionEnd"};for(a in c)if(void 0!==b.style[a])return c[a];return!1}};(function(){var a="strokeColor strokeOpacity strokeWeight fillColor fillOpacity strokeStyle strokeDasharray fontSize".split(" "),b=g.da.extend({A:function(){this.tca=1;this.rP={};this.fda(c);this.b_=[]},D5:function(a){for(var b=!0,c=13;22>=c;c++){var h=this.r4(a,c);if(h&&(0<h.fontSize||h.ig)){b=!1;break}}return b},r4:function(a,b){return this.Uk(a,b)},era:function(a,b){return this.Uk(a,b)},BR:function(a,b){return this.Uk(a,b)},coa:function(b,c){if(c)for(var f in c)c.hasOwnProperty(f)&&0<=a.indexOf(f)&& void 0===b[f]&&(b[f]=c[f]);return b},RI:function(b,c){if(!b)return null;for(var f={},h=0,k=a.length;h<k;h++){var l=a[h];b.hasOwnProperty(l)&&void 0!==b[l]&&(f[l]=b[l])}this.coa(f,c);return f},SCa:function(a,b){return void 0===a?b:this.gJ(a?this.RI(a,b):null)},a2:function(a){if(!a)return null;a=this.RI(a);return g.extend(a,{ln:this.lra(a)})},Uk:function(a,b){var c=a[0]+"_"+a[1];b=Math.round(b);var h=this.rP[c];if(!h)return 0>this.b_.indexOf(c)&&this.b_.push(c),null;for(var c=0,k=h.length;c<k;c++)if(0<= h[c].lz.indexOf(""+b))return h[c].SU;return 20<b&&(h=h[h.length-1],0<=h.lz.indexOf("20"))?(h.lz.push(""+b),h.SU):null},fda:function(a){for(var b in a)a.hasOwnProperty(b)&&this.gda(a[b],b)},gda:function(a,b){for(var c=0,h=a.length;c<h;c++)this.cda(a[c],b)},cda:function(a,b){var c=a.$;if(c){var h=a.StyleItem,c=c.mainkey+"_"+c.subkey;this.rP[c]&&console.error("Style key duplicate",c);this.rP[c]=this.eda(h,b)}else console.warn("Missing group $",a)},eda:function(a,b){for(var c=[],h=0,k=a.length;h<k;h++){var l= this.dda(a[h],b);l&&c.push(l)}return c},dda:function(a,b){var c=a.$;if(c){var h={};h.lz=c.level.split(",");h.Goa=c.desc.split(",");h.SU=this.bda(h,h.Goa,b);h.SU.lz=h.lz;return h}console.warn("Missing $",a)},Op:function(a){a.trim&&(a=a.trim());return g.a.Rr(a.substr(2,8))},F4:function(){return this.tca++},lra:function(a){var b=[],c;for(c in a)a.hasOwnProperty(c)&&b.push(c);b.sort();for(var h=[],k=0,l=b.length;k<l;k++)h.push(b[k]+":"+a[c]);return h.join(";")||"empty"},z6:function(a,b){return a?b?g.extend({}, a,b,{ln:b.ln+";"+a.ln}):a:b},gJ:function(a){return g.extend({},a,{ln:this.F4()})},bda:function(a,b,c){switch(c){case "PoiStyle":a={ig:parseInt(b[1],10),fontSize:Math.min(15,parseInt(b[4],10)||0),fillColor:this.Op(b[5]),strokeColor:this.Op(b[6]),TX:0===parseInt(b[8],10)};1===a.ig&&(a.ig=0);break;case "LineStyle":a={fillColor:"rgba(252,249,242,1)",strokeColor:this.Op(b[7]),strokeWeight:Math.max(2,Math.round(parseInt(b[2],10)/3))};break;case "RegionStyle":a={fillColor:this.Op(b[2])};break;case "BuildingStyle":a= {fillColor:this.Op(b[1]),strokeColor:this.Op(b[2])};break;default:return console.warn("Unknown style type",c),null}a.ln=this.F4();return a}}),c={PoiStyle:[{$:{mainkey:"10001",subkey:"1"},StyleItem:[{$:{level:"18,19,20",desc:"50,2,1,1,12,0xff696F71,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"2"},StyleItem:[{$:{level:"17,18,19,20",desc:"50,7,1,1,12,0xff69859F,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"3"},StyleItem:[{$:{level:"19,20",desc:"50,8,1,1,12,0xff69859F,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001", subkey:"4"},StyleItem:[{$:{level:"18",desc:"50,25,2,1,0,0xff84638E,0xffffffff,0x0,0"}},{$:{level:"19,20",desc:"50,25,1,1,12,0xff84638E,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"5"},StyleItem:[{$:{level:"17,18,19,20",desc:"50,59,2,1,0,0xff84638E,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"6"},StyleItem:[{$:{level:"18,19,20",desc:"50,3,1,1,12,0xff84638E,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"7"},StyleItem:[{$:{level:"18,19,20",desc:"50,4,1,1,12,0xff816B4E,0xffffffff,0x0,0"}}]}, {$:{mainkey:"10001",subkey:"8"},StyleItem:[{$:{level:"17,18,19,20",desc:"50,9,1,1,12,0xff935676,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"9"},StyleItem:[{$:{level:"18,19,20",desc:"50,10,1,1,12,0xff935676,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"10"},StyleItem:[{$:{level:"18,19,20",desc:"50,14,1,1,12,0xff696F71,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"11"},StyleItem:[{$:{level:"18,19,20",desc:"50,15,1,1,12,0xff696F71,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"12"}, StyleItem:[{$:{level:"18,19,20",desc:"50,17,1,1,12,0xff816B4E,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"13"},StyleItem:[{$:{level:"18,19,20",desc:"50,18,1,1,12,0xff69859F,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"14"},StyleItem:[{$:{level:"18,19,20",desc:"50,19,1,1,12,0xff696F71,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"15"},StyleItem:[{$:{level:"18,19,20",desc:"50,22,1,1,12,0xff696F71,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"16"},StyleItem:[{$:{level:"20",desc:"50,24,1,1,12,0xff696F71,0xffffffff,0x0,0"}}]}, {$:{mainkey:"10001",subkey:"17"},StyleItem:[{$:{level:"19,20",desc:"50,1,0,1,12,0xff696F71,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"18"},StyleItem:[{$:{level:"18,19,20",desc:"50,27,1,1,12,0xff84638E,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"19"},StyleItem:[{$:{level:"18,19,20",desc:"50,36,1,1,12,0xff8E3A3D,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"20"},StyleItem:[{$:{level:"17,18,19,20",desc:"50,39,1,1,12,0xff935676,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"21"},StyleItem:[{$:{level:"18,19", desc:"50,44,2,1,0,0xff62686B,0xffffffff,0x0,0"}},{$:{level:"20",desc:"50,44,1,1,12,0xff62686B,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"22"},StyleItem:[{$:{level:"18,19",desc:"50,45,2,1,0,0xff62686B,0xffffffff,0x0,0"}},{$:{level:"20",desc:"50,45,1,1,12,0xff62686B,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"23"},StyleItem:[{$:{level:"18,19",desc:"50,46,2,1,0,0xff62686B,0xffffffff,0x0,0"}},{$:{level:"20",desc:"50,46,1,1,12,0xff62686B,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"24"}, StyleItem:[{$:{level:"18,19",desc:"50,47,2,1,0,0xff62686B,0xffffffff,0x0,0"}},{$:{level:"20",desc:"50,47,1,1,12,0xff62686B,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"25"},StyleItem:[{$:{level:"18,19",desc:"50,48,2,1,0,0xff62686B,0xffffffff,0x0,0"}},{$:{level:"20",desc:"50,48,1,1,12,0xff62686B,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"26"},StyleItem:[{$:{level:"18,19",desc:"50,49,2,1,0,0xff62686B,0xffffffff,0x0,0"}},{$:{level:"20",desc:"50,49,1,1,12,0xff62686B,0xffffffff,0x0,0"}}]}, {$:{mainkey:"10001",subkey:"27"},StyleItem:[{$:{level:"18,19",desc:"50,50,2,1,0,0xff62686B,0xffffffff,0x0,0"}},{$:{level:"20",desc:"50,50,1,1,12,0xff62686B,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"28"},StyleItem:[{$:{level:"18,19",desc:"50,51,2,1,0,0xff62686B,0xffffffff,0x0,0"}},{$:{level:"20",desc:"50,51,1,1,12,0xff62686B,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"29"},StyleItem:[{$:{level:"18,19",desc:"50,52,2,1,0,0xff62686B,0xffffffff,0x0,0"}},{$:{level:"20",desc:"50,52,1,1,12,0xff62686B,0xffffffff,0x0,0"}}]}, {$:{mainkey:"10001",subkey:"30"},StyleItem:[{$:{level:"18,19",desc:"50,53,2,1,0,0xff62686B,0xffffffff,0x0,0"}},{$:{level:"20",desc:"50,53,1,1,12,0xff62686B,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"31"},StyleItem:[{$:{level:"18,19",desc:"50,54,2,1,0,0xff62686B,0xffffffff,0x0,0"}},{$:{level:"20",desc:"50,54,1,1,12,0xff62686B,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"32"},StyleItem:[{$:{level:"18,19",desc:"50,55,2,1,0,0xff62686B,0xffffffff,0x0,0"}},{$:{level:"20",desc:"50,55,1,1,12,0xff62686B,0xffffffff,0x0,0"}}]}, {$:{mainkey:"10001",subkey:"33"},StyleItem:[{$:{level:"18,19",desc:"50,56,2,1,0,0xff62686B,0xffffffff,0x0,0"}},{$:{level:"20",desc:"50,56,1,1,12,0xff62686B,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"34"},StyleItem:[{$:{level:"18,19",desc:"50,57,2,1,0,0xff696F71,0xffffffff,0x0,0"}},{$:{level:"20",desc:"50,57,1,1,12,0xff696F71,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"35"},StyleItem:[{$:{level:"17,18,19,20",desc:"50,6,2,1,0,0xff696F71,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"36"}, StyleItem:[{$:{level:"18,19,20",desc:"50,12,1,1,12,0xff69859F,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"37"},StyleItem:[{$:{level:"19,20",desc:"50,13,1,1,12,0xff696F71,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"38"},StyleItem:[{$:{level:"18,19,20",desc:"50,16,1,1,12,0xff696F71,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"39"},StyleItem:[{$:{level:"17",desc:"50,20,2,1,0,0xff69859F,0xffffffff,0x0,0"}},{$:{level:"18,19,20",desc:"50,20,1,1,12,0xff69859F,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001", subkey:"40"},StyleItem:[{$:{level:"17",desc:"50,5,2,1,0,0xff69859F,0xffffffff,0x0,0"}},{$:{level:"18,19,20",desc:"50,5,1,1,12,0xff69859F,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"41"},StyleItem:[{$:{level:"20",desc:"50,28,1,1,12,0xff696F71,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"42"},StyleItem:[{$:{level:"18,19,20",desc:"50,29,1,1,12,0xff4C6776,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"43"},StyleItem:[{$:{level:"18,19,20",desc:"50,31,1,1,12,0xff000000,0xffffffff,0x0,0"}}]}, {$:{mainkey:"10001",subkey:"44"},StyleItem:[{$:{level:"18,19,20",desc:"50,32,2,1,0,0xff4C6776,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"45"},StyleItem:[{$:{level:"18,19,20",desc:"50,33,2,1,0,0xff4C6776,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"46"},StyleItem:[{$:{level:"18",desc:"50,34,2,1,0,0xff935676,0xffffffff,0x0,0"}},{$:{level:"19,20",desc:"50,34,1,1,12,0xff935676,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"47"},StyleItem:[{$:{level:"18,19,20",desc:"50,35,2,1,0,0xff4C6776,0xffffffff,0x0,0"}}]}, {$:{mainkey:"10001",subkey:"48"},StyleItem:[{$:{level:"19,20",desc:"50,37,1,1,12,0xff4C6776,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"49"},StyleItem:[{$:{level:"18,19,20",desc:"50,38,2,1,0,0xff4C6776,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"50"},StyleItem:[{$:{level:"18,19,20",desc:"50,42,1,1,12,0xff69859F,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"51"},StyleItem:[{$:{level:"18,19,20",desc:"50,41,1,1,12,0xff69859F,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"52"},StyleItem:[{$:{level:"20", desc:"50,43,1,1,12,0xff696F71,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"53"},StyleItem:[{$:{level:"17,18,19,20",desc:"50,58,2,1,0,0xff696F71,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"54"},StyleItem:[{$:{level:"17,18,19,20",desc:"50,21,1,1,12,0xff69859F,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"55"},StyleItem:[{$:{level:"17,18,19,20",desc:"50,30,1,1,12,0xff69859F,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"56"},StyleItem:[{$:{level:"19,20",desc:"50,1,0,1,12,0xff000000,0xffffffff,0x0,0"}}]}, {$:{mainkey:"10001",subkey:"57"},StyleItem:[{$:{level:"18,19,20",desc:"50,23,2,1,0,0xff69859F,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"58"},StyleItem:[{$:{level:"18,19,20",desc:"50,40,2,1,0,0xff69859F,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"59"},StyleItem:[{$:{level:"18,19,20",desc:"50,11,2,1,0,0xff69859F,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"60"},StyleItem:[{$:{level:"16,17",desc:"50,1,0,1,20,0xff6590a6,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"62"},StyleItem:[{$:{level:"17,18,19,20", desc:"50,61,2,1,0,0xff62686B,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"63"},StyleItem:[{$:{level:"17,18,19,20",desc:"50,60,2,1,0,0xff62686B,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"64"},StyleItem:[{$:{level:"17",desc:"50,62,2,1,0,0xff62686B,0xffffffff,0x0,0"}},{$:{level:"18,19,20",desc:"50,62,1,1,12,0xff62686B,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"65"},StyleItem:[{$:{level:"17",desc:"50,63,2,1,0,0xff62686B,0xffffffff,0x0,0"}},{$:{level:"18,19,20",desc:"50,63,1,1,12,0xff62686B,0xffffffff,0x0,0"}}]}, {$:{mainkey:"10001",subkey:"66"},StyleItem:[{$:{level:"17",desc:"50,64,2,1,0,0xff62686B,0xffffffff,0x0,0"}},{$:{level:"18,19,20",desc:"50,64,1,1,12,0xff62686B,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"67"},StyleItem:[{$:{level:"17",desc:"50,65,2,1,0,0xff62686B,0xffffffff,0x0,0"}},{$:{level:"18,19,20",desc:"50,65,1,1,12,0xff62686B,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"68"},StyleItem:[{$:{level:"17",desc:"50,66,2,1,0,0xff62686B,0xffffffff,0x0,0"}},{$:{level:"18,19,20",desc:"50,66,1,1,12,0xff62686B,0xffffffff,0x0,0"}}]}, {$:{mainkey:"10001",subkey:"69"},StyleItem:[{$:{level:"17",desc:"50,67,2,1,0,0xff62686B,0xffffffff,0x0,0"}},{$:{level:"18,19,20",desc:"50,67,1,1,12,0xff62686B,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"70"},StyleItem:[{$:{level:"17",desc:"50,68,2,1,0,0xff62686B,0xffffffff,0x0,0"}},{$:{level:"18,19,20",desc:"50,68,1,1,12,0xff62686B,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"71"},StyleItem:[{$:{level:"17",desc:"50,69,2,1,0,0xff62686B,0xffffffff,0x0,0"}},{$:{level:"18,19,20",desc:"50,69,1,1,12,0xff62686B,0xffffffff,0x0,0"}}]}, {$:{mainkey:"10001",subkey:"72"},StyleItem:[{$:{level:"17",desc:"50,70,2,1,0,0xff62686B,0xffffffff,0x0,0"}},{$:{level:"18,19,20",desc:"50,70,1,1,12,0xff62686B,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"73"},StyleItem:[{$:{level:"17,18,19,20",desc:"50,71,2,1,0,0xff62686B,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"74"},StyleItem:[{$:{level:"17,18,19,20",desc:"50,72,2,1,0,0xff62686B,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"75"},StyleItem:[{$:{level:"18,19",desc:"50,73,2,1,0,0xff62686B,0xffffffff,0x0,0"}}, {$:{level:"20",desc:"50,73,1,1,12,0xff62686B,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"76"},StyleItem:[{$:{level:"18,19",desc:"50,74,2,1,0,0xff62686B,0xffffffff,0x0,0"}},{$:{level:"20",desc:"50,74,1,1,12,0xff62686B,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"77"},StyleItem:[{$:{level:"18,19",desc:"50,75,2,1,0,0xff62686B,0xffffffff,0x0,0"}},{$:{level:"20",desc:"50,75,1,1,12,0xff62686B,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"78"},StyleItem:[{$:{level:"18,19",desc:"50,76,2,1,0,0xff62686B,0xffffffff,0x0,0"}}, {$:{level:"20",desc:"50,76,1,1,12,0xff62686B,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"79"},StyleItem:[{$:{level:"19,20",desc:"50,81,1,1,12,0xff69859F,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"80"},StyleItem:[{$:{level:"19,20",desc:"50,89,1,1,12,0xff69859F,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"81"},StyleItem:[{$:{level:"19,20",desc:"50,85,1,1,12,0xff69859F,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"82"},StyleItem:[{$:{level:"19,20",desc:"50,90,1,1,12,0xff69859F,0xffffffff,0x0,0"}}]}, {$:{mainkey:"10001",subkey:"83"},StyleItem:[{$:{level:"19,20",desc:"50,83,1,1,12,0xff69859F,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"84"},StyleItem:[{$:{level:"19,20",desc:"50,103,1,1,12,0xff69859F,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"85"},StyleItem:[{$:{level:"19,20",desc:"50,98,1,1,12,0xff69859F,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"86"},StyleItem:[{$:{level:"19,20",desc:"50,86,1,1,12,0xff69859F,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"87"},StyleItem:[{$:{level:"19,20", desc:"50,87,1,1,12,0xff69859F,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"88"},StyleItem:[{$:{level:"19,20",desc:"50,111,1,1,12,0xff69859F,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"89"},StyleItem:[{$:{level:"19,20",desc:"50,88,1,1,12,0xff69859F,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"90"},StyleItem:[{$:{level:"19,20",desc:"50,91,1,1,12,0xff69859F,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"91"},StyleItem:[{$:{level:"19,20",desc:"50,93,1,1,12,0xff69859F,0xffffffff,0x0,0"}}]}, {$:{mainkey:"10001",subkey:"92"},StyleItem:[{$:{level:"19,20",desc:"50,113,1,1,12,0xff69859F,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"93"},StyleItem:[{$:{level:"19,20",desc:"50,95,1,1,12,0xff69859F,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"94"},StyleItem:[{$:{level:"19,20",desc:"50,100,1,1,12,0xff69859F,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"95"},StyleItem:[{$:{level:"19,20",desc:"50,97,1,1,12,0xff69859F,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"96"},StyleItem:[{$:{level:"19,20", desc:"50,94,1,1,12,0xff69859F,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"97"},StyleItem:[{$:{level:"18,19,20",desc:"50,108,1,1,12,0xff69859F,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"98"},StyleItem:[{$:{level:"18,19,20",desc:"50,1,2,1,0,0xff69859F,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"99"},StyleItem:[{$:{level:"18,19,20",desc:"50,1,0,1,12,0xff696F71,0xffffffff,0x0,1"}}]},{$:{mainkey:"10001",subkey:"105"},StyleItem:[{$:{level:"16,17,18",desc:"50,1,0,1,14,0xff696F71,0xffffffff,0x0,0"}}]}, {$:{mainkey:"10001",subkey:"106"},StyleItem:[{$:{level:"19,20",desc:"50,1,0,1,12,0xff4d4e51,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"107"},StyleItem:[{$:{level:"16,17,18,19,20",desc:"50,109,1,1,12,0xff4d4e51,0xffffffff,0x0,0"}}]}],LineStyle:[{$:{mainkey:"20001",subkey:"1"},StyleItem:[{$:{level:"15,16,17,18,19,20",desc:"88,2,10,0,0,0,0xffe68e00,0xffe68e00,0xffe68e00,0xffe68e00"}}]},{$:{mainkey:"20001",subkey:"2"},StyleItem:[{$:{level:"15,16,17,18,19,20",desc:"88,2,8,0,0,0,0xffababab,0xffababab,0xff5e492f,0xffffe080"}}]}], RegionStyle:[{$:{mainkey:"30001",subkey:"1"},StyleItem:[{$:{level:"15,16,17,18,19,20",desc:"90,1,0xfffcfbed"}}]},{$:{mainkey:"30001",subkey:"99"},StyleItem:[{$:{level:"19,20",desc:"90,1,0x1a151b2b"}}]},{$:{mainkey:"30001",subkey:"98"},StyleItem:[{$:{level:"19,20",desc:"90,1,0x8c151b2b"}}]}],BuildingStyle:[{$:{mainkey:"30001",subkey:"2"},StyleItem:[{$:{level:"17,18,19,20",desc:"99,0xffe6e6e6,0xff858585,0xffcfcfcf,0xffb8b8b8,255"}}]},{$:{mainkey:"30001",subkey:"3"},StyleItem:[{$:{level:"15,16,17,18,19,20", desc:"99,0xffe6e6e6,0xff858585,0xffcfcfcf,0xffb8b8b8,255"}}]},{$:{mainkey:"30001",subkey:"4"},StyleItem:[{$:{level:"15,16,17,18,19,20",desc:"99,0xffbfd6e9 ,0xff6f7c87,0xffacc0d1,0xff99abba,255"}}]},{$:{mainkey:"30001",subkey:"5"},StyleItem:[{$:{level:"17,18,19,20",desc:"99,0xffcce3e8 ,0xff778487,0xffb7ccd0,0xffa3b6ba,255"}}]},{$:{mainkey:"30001",subkey:"6"},StyleItem:[{$:{level:"15,16,17,18,19,20",desc:"99,0xffcce3e8,0xff778487,0xffb7ccd0,0xffa3b6ba,255"}}]},{$:{mainkey:"30001",subkey:"7"},StyleItem:[{$:{level:"15,16,17,18,19,20", desc:"99,0xffe5dae8,0xff857f87,0xffcec4d0,0xffb7aeba,255"}}]},{$:{mainkey:"30001",subkey:"8"},StyleItem:[{$:{level:"15,16,17,18,19,20",desc:"99,0xfffaeccd,0xff948c79,0xffe1d4b8,0xffc8bda4,255"}}]},{$:{mainkey:"30001",subkey:"9"},StyleItem:[{$:{level:"15,16,17,18,19,20",desc:"99,0xff90bae8,0xff546d87,0xff81a7d0,0xff7395ba,255"}}]},{$:{mainkey:"30001",subkey:"10"},StyleItem:[{$:{level:"15,16,17,18,19,20",desc:"99,0xfff0e3df,0xff8f8d8c,0xffd8ccc8,0xffc0b6b2,255"}}]},{$:{mainkey:"30001",subkey:"11"}, StyleItem:[{$:{level:"15,16,17,18,19,20",desc:"99,0xffbfd3e9,0xff6f7b87,0xffacbdd1,0xff99a9ba,255"}}]},{$:{mainkey:"30001",subkey:"12"},StyleItem:[{$:{level:"15,16,17,18,19,20",desc:"99,0xffdae2f4,0xff7f848f,0xffc4cbdb,0xffaeb5c3,255"}}]},{$:{mainkey:"30001",subkey:"13"},StyleItem:[{$:{level:"15,16,17,18,19,20",desc:"99,0xff95e3f5,0xff598791,0xff86ccdc,0xff77b6c4,255"}}]},{$:{mainkey:"30001",subkey:"14"},StyleItem:[{$:{level:"15,16,17,18,19,20",desc:"99,0xffc9edf5,0xff778d91,0xffb5d5dc,0xffa1bec4,255"}}]}, {$:{mainkey:"30001",subkey:"15"},StyleItem:[{$:{level:"15,16,17,18,19,20",desc:"99,0xfff4c4ba,0xff8f726d,0xffdbb0a7,0xffc39d95,255"}}]},{$:{mainkey:"30001",subkey:"16"},StyleItem:[{$:{level:"15,16,17,18,19,20",desc:"99,0xffdbe8b3,0xff7f8768,0xffc5d0a1,0xffafba8f,255"}}]},{$:{mainkey:"30001",subkey:"17"},StyleItem:[{$:{level:"15,16,17,18,19,20",desc:"99,0xfff5cedc,0xff917a82,0xffdcb9c6,0xffc4a5b0,255"}}]}]};g.zF=new b;c=null})();(function(){function a(a){function c(a,b,c){a=a.subarray(b,c);b=0;c="";var d=0;for(b=d=0;b<a.length;)d=a[b],0===d>>>7?(d=String.fromCharCode(a[b]),"0"!==d.charCodeAt(0).toString(16)&&(c+=d),b+=1):252===(d&252)?(d=(a[b]&3)<<30,d|=(a[b+1]&63)<<24,d|=(a[b+2]&63)<<18,d|=(a[b+3]&63)<<12,d|=(a[b+4]&63)<<6,d|=a[b+5]&63,c+=String.fromCharCode(d),b+=6):248===(d&248)?(d=(a[b]&7)<<24,d|=(a[b+1]&63)<<18,d|=(a[b+2]&63)<<12,d|=(a[b+3]&63)<<6,d|=a[b+4]&63,c+=String.fromCharCode(d),b+=5):240===(d&240)?(d=(a[b]&15)<< 18,d|=(a[b+1]&63)<<12,d|=(a[b+2]&63)<<6,d|=a[b+3]&63,c+=String.fromCharCode(d),b+=4):224===(d&224)?(d=(a[b]&31)<<12,d|=(a[b+1]&63)<<6,d|=a[b+2]&63,c+=String.fromCharCode(d),b+=3):192===(d&192)?(d=(a[b]&63)<<6,d|=a[b+1]&63,c+=String.fromCharCode(d),b+=2):(d=String.fromCharCode(a[b]),"0"!==d.charCodeAt(0).toString(16)&&(c+=d),b+=1);return c.trim()}function d(a,b){a=a.toString(2);b=b.toString(2);a=Array(32-a.length+1).join("0")+a;b=Array(32-b.length+1).join("0")+b;var c=k;c.lastIndex=0;if(c=(b+a).toString().match(c)){var d= 0;-1===c[0].indexOf(".")&&(d=parseInt(c,2));return d=d.toString(36).toUpperCase()}return"error"}function e(a){for(var b,e,f,k,r,s={},u={},v=new Uint8Array(a),w=new DataView(a),t=0,t=t+4,t=t+4,x=w.getInt32(t,!0),t=t+4,t=t+4,y=w.getInt32(t,!0),t=t+(4+y),t=t+4,F=w.getUint32(t,!0).toString(2),C=w.getUint32(t+4,!0).toString(2),E=d(F,C),t=t+8,A=c(v,t,t+64),t=t+64,z=c(v,t,t+64),t=t+64,G=w.getInt8(t,!0),t=t+1,H=c(v,t,t+8),t=t+8,I=w.getInt16(t,!0),P=w.getInt16(t+2,!0),t=t+4,L=w.getFloat32(t,!0),O=w.getFloat32(t+ 4,!0),t=t+8,K=w.getFloat32(t,!0),D=w.getFloat32(t+4,!0),t=t+8,Q=w.getFloat32(t,!0),M=w.getFloat32(t+4,!0),t=t+8,J=w.getInt32(t,!0),t=t+4,N=w.getInt32(t,!0),t=t+4,V=w.getInt32(t,!0),t=t+4,R=[],T=0;T<J;T++)R.push(w.getInt32(t,!0)),t+=4;for(var S=[],T=0;T<V;T++)S.push(w.getInt32(t,!0)),t+=4;for(var Z=[],T=0;T<J;T++){var U=c(v,t,t+48);Z.push(U);t+=48}for(var W=[],T=0;T<J;T++){var Y=c(v,t,t+8);W.push(Y);t+=8}for(var X=[],T=0;T<N;T++){var aa=w.getInt32(t,!0)*h+O,da=w.getInt32(t+4,!0)*h+L;X.push([aa,da]); t+=8}b={type:"Feature",geometry:{type:"Polygon",coordinates:[X]},properties:{pid:E,name_cn:A,name_en:z,default_floor:G,buildingtype:H,building_poi_style:[I,P],centerPoint:[O,L],left_bottom_Point:[K,D],width:Q,height:M,numberofFloor:J,numberofGeoPoints:N,park_floor_count:V,floor_indexs:R,park_floors:S,floor_names:Z,floor_nonas:W}};for(var Aa=0;Aa<x;Aa++){var ha=c(v,t,t+8),t=t+8,ea=w.getInt8(t,!0),t=t+1;u[ea]={floor:{},shops:[],pubs:[],cons:[]};for(var la=w.getInt16(t,!0),ia=w.getInt16(t+2,!0),t=t+ 4,ta=w.getInt16(t,!0),Ia=w.getInt16(t+2,!0),t=t+4,Ha=w.getInt16(t,!0),Ba=w.getInt16(t+2,!0),t=t+4,Ca=w.getInt32(t,!0),t=t+4,tc=w.getInt32(t,!0),t=t+4,uc=w.getInt32(t,!0),t=t+4,Hb=w.getInt32(t,!0),t=t+4,Ib=[],Oa=0;Oa<Hb;Oa++){for(var zd=w.getInt32(t,!0),t=t+4,zc=[],ja=0;ja<zd;ja++)aa=w.getInt32(t,!0)*h+O,da=w.getInt32(t+4,!0)*h+L,zc.push([aa,da]),t+=8;Ib.push(zc)}var Ac="Polygon",Bc=Ib[0];1<Hb&&(Ac="MultiPolygon",Bc=Ib);e={type:"Feature",geometry:{type:Ac,coordinates:[Bc]},properties:{namecode:ha, index:ea,floor_region_type:[la,ia],unhighlighted_floor_line_style:[ta,Ia],highlighted_floor_line_style:[Ha,Ba],numberofShopCount:Ca,numberofPubCount:tc,numberofConCount:uc,floor_area_count:Hb}};u[ea].floor=e;for(var Cc=[],ua=0,ua=0;ua<Ca;ua++){for(var Ad=c(v,t,t+128),t=t+128,Bd=w.getUint32(t,!0).toString(2),Cd=w.getUint32(t+4,!0).toString(2),Dd=d(Bd,Cd),t=t+8,Ed=c(v,t,t+24),t=t+24,Fd=c(v,t,t+12),t=t+12,Gd=w.getInt32(t,!0),t=t+4,Hd=w.getFloat32(t,!0),t=t+4,Id=w.getInt8(t,!0),t=t+1,Jd=w.getInt16(t, !0),Kd=w.getInt16(t+2,!0),t=t+4,Ld=w.getInt16(t,!0),Md=w.getInt16(t+2,!0),t=t+4,Nd=w.getInt32(t,!0)*h+O,Od=w.getInt32(t+4,!0)*h+L,t=t+8,Dc=w.getInt32(t,!0),t=t+4,Ec=[],Oa=0;Oa<Dc;Oa++)aa=w.getInt32(t,!0)*h+O,da=w.getInt32(t+4,!0)*h+L,Ec.push([aa,da]),t+=8;f={type:"Feature",geometry:{type:"Polygon",coordinates:[Ec]},properties:{name:Ad,pid:Dd,cpid:Ed,logo:Fd,area:Gd,rank:Hd,height:Id,poitype:[Jd,Kd],regiontype:[Ld,Md],font_anthor_point:[Nd,Od],shop_point_number:Dc}};Cc.push(f)}u[ea].aL=Cc;for(var Fc= [],ua=ua=0;ua<tc;ua++){var Pd=c(v,t,t+24),t=t+24,Qd=w.getUint32(t,!0).toString(2),Rd=w.getUint32(t+4,!0).toString(2),Sd=d(Qd,Rd),t=t+8,Td=c(v,t,t+48),t=t+48,Ud=w.getFloat32(t,!0),t=t+4,Vd=w.getInt16(t,!0),Wd=w.getInt16(t+2,!0),t=t+4,aa=w.getInt32(t,!0)*h+O,da=w.getInt32(t+4,!0)*h+L,t=t+8;r={type:"Feature",geometry:{type:"Point",coordinates:[aa,da]},properties:{cpid:Pd,pid:Sd,name:Td,rank:Ud,poitype:[Vd,Wd]}};Fc.push(r)}u[ea].AK=Fc;for(var Gc=[],ua=0;ua<uc;ua++){var Xd=c(v,t,t+24),t=t+24,Yd=w.getUint32(t, !0).toString(2),Zd=w.getUint32(t+4,!0).toString(2),$d=d(Yd,Zd),t=t+8,ae=c(v,t,t+48),t=t+48,be=w.getFloat32(t,!0),t=t+4,ce=w.getInt16(t,!0),de=w.getInt16(t+2,!0),t=t+4,aa=w.getInt32(t,!0)*h+O,da=w.getInt32(t+4,!0)*h+L,t=t+8;k={type:"Feature",geometry:{type:"Point",coordinates:[aa,da]},properties:{cpid:Xd,pid:$d,name:ae,rank:be,poitype:[ce,de]}};Gc.push(k)}u[ea].rI=Gc}for(var t=t+4,ee=w.getInt32(t,!0),t=t+(4+ee),fe=w.getInt32(t,!0),t=t+4,Hc=[],T=0;T<fe;T++)aa=w.getInt32(t,!0)*h+O,da=w.getInt32(t+4, !0)*h+L,Hc.push([aa,da]),t+=8;b.properties.outside_outline=Hc;var Pa={},ka;for(ka in u)if(u.hasOwnProperty(ka)){Pa.floor=u[ka].floor;for(ja=0;ja<u[ka].aL.length;ja++){var ge=w.getInt16(t,!0),t=t+2,he=w.getInt16(t,!0),t=t+2;u[ka].aL[ja].properties.zoom_min=ge;u[ka].aL[ja].properties.zoom_max=he}Pa.shops=u[ka].aL;for(ja=0;ja<u[ka].AK.length;ja++){var ie=w.getInt16(t,!0),t=t+2,je=w.getInt16(t,!0),t=t+2;u[ka].AK[ja].properties.zoom_min=ie;u[ka].AK[ja].properties.zoom_max=je}Pa.pubs=u[ka].AK;for(ja=0;ja< u[ka].rI.length;ja++){var ke=w.getInt16(t,!0),t=t+2,le=w.getInt16(t,!0),t=t+2;u[ka].rI[ja].properties.zoom_min=ke;u[ka].rI[ja].properties.zoom_max=le}Pa.cons=u[ka].rI;s.floor=Pa}var t=t+4,me=w.getInt32(t,!0),t=t+(4+me),ne=w.getInt8(t,!0),t=t+1;b.properties.TCa=ne;s.building=b;return s}var f=f||{};f.yp=function(){this.Nr=0};f.yp.prototype.create=function(a){this.jx&&this.Nr===a||(this.jx=[]);this.Nr=a;this.vH=this.cj=0};f.yp.prototype.flush=function(){var a=this.cj-this.vH;if(0!==a){for(;a--;)this.Jr.bAa(this.jx[this.vH++]); this.cj>=this.Nr&&(this.cj=0);this.vH=this.cj}};f.yp.prototype.JK=function(){this.flush();this.Jr=null};f.yp.prototype.GU=function(a){this.JK();this.Jr=a};f.yp.prototype.Gg=function(a){a||(this.cj=this.vH=0)};f.yp.prototype.boa=function(a,b){var c=this.cj-a-1;for(0>c&&(c+=this.Nr);b--;)c>=this.Nr&&(c=0),this.jx[this.cj++]=this.jx[c++],this.cj>=this.Nr&&this.flush()};f.yp.prototype.$va=function(a){this.jx[this.cj++]=a;this.cj>=this.Nr&&this.flush()};f.yp.prototype.N3=function(a){a=this.cj-a-1;0>a&& (a+=this.Nr);return this.jx[a]};f.Xw=function(){};f.Xw.prototype.GU=function(a){this.Jr=a};f.Xw.prototype.JK=function(){this.Jr=null};f.Xw.prototype.Gg=function(){var a=5;this.Uj=0;for(this.Kh=-1;a--;)this.Uj=this.Uj<<8|this.Jr.Uh()};f.Xw.prototype.zoa=function(a){for(var b=0,c;a--;)this.Kh>>>=1,c=this.Uj-this.Kh>>>31,this.Uj-=this.Kh&c-1,b=b<<1|1-c,0===(this.Kh&4278190080)&&(this.Uj=this.Uj<<8|this.Jr.Uh(),this.Kh<<=8);return b};f.Xw.prototype.ak=function(a,b){var c=a[b],d=(this.Kh>>>11)*c;if((this.Uj^ 2147483648)<(d^2147483648))return this.Kh=d,a[b]+=2048-c>>>5,0===(this.Kh&4278190080)&&(this.Uj=this.Uj<<8|this.Jr.Uh(),this.Kh<<=8),0;this.Kh-=d;this.Uj-=d;a[b]-=c>>>5;0===(this.Kh&4278190080)&&(this.Uj=this.Uj<<8|this.Jr.Uh(),this.Kh<<=8);return 1};f.So=function(a,b){for(;b--;)a[b]=1024};f.Mm=function(a){this.vO=[];this.YG=a};f.Mm.prototype.Gg=function(){f.So(this.vO,1<<this.YG)};f.Mm.prototype.Ge=function(a){for(var b=1,c=this.YG;c--;)b=b<<1|a.ak(this.vO,b);return b-(1<<this.YG)};f.Mm.prototype.Wwa= function(a){for(var b=1,c=0,d=0,e;d<this.YG;++d)e=a.ak(this.vO,b),b=b<<1|e,c|=e<<d;return c};f.Xwa=function(a,b,c,d){for(var e=1,f=0,h=0,k;h<d;++h)k=c.ak(a,b+e),e=e<<1|k,f|=k<<h;return f};f.DA=function(){this.VM=[];this.qO=[];this.uO=[];this.iZ=new f.Mm(8);this.JB=0};f.DA.prototype.create=function(a){for(;this.JB<a;++this.JB)this.qO[this.JB]=new f.Mm(3),this.uO[this.JB]=new f.Mm(3)};f.DA.prototype.Gg=function(){var a=this.JB;for(f.So(this.VM,2);a--;)this.qO[a].Gg(),this.uO[a].Gg();this.iZ.Gg()};f.DA.prototype.Ge= function(a,b){return 0===a.ak(this.VM,0)?this.qO[b].Ge(a):0===a.ak(this.VM,1)?8+this.uO[b].Ge(a):16+this.iZ.Ge(a)};f.rF=function(){this.mG=[]};f.rF.prototype.Gg=function(){f.So(this.mG,768)};f.rF.prototype.Boa=function(a){var b=1;do b=b<<1|a.ak(this.mG,b);while(256>b);return b&255};f.rF.prototype.Coa=function(a,b){var c=1,d,e;do if(d=b>>7&1,b<<=1,e=a.ak(this.mG,(1+d<<8)+c),c=c<<1|e,d!==e){for(;256>c;)c=c<<1|a.ak(this.mG,c);break}while(256>c);return c&255};f.AF=function(){};f.AF.prototype.create=function(a, b){var c;if(!this.eG||this.KB!==b||this.CO!==a)for(this.CO=a,this.Pja=(1<<a)-1,this.KB=b,this.eG=[],c=1<<this.KB+this.CO;c--;)this.eG[c]=new f.rF};f.AF.prototype.Gg=function(){for(var a=1<<this.KB+this.CO;a--;)this.eG[a].Gg()};f.AF.prototype.zqa=function(a,b){return this.eG[((a&this.Pja)<<this.KB)+((b&255)>>>8-this.KB)]};f.Lw=function(){this.Mp=new f.yp;this.Lh=new f.Xw;this.DZ=[];this.IZ=[];this.JZ=[];this.KZ=[];this.LZ=[];this.HZ=[];this.Nx=[];this.l0=[];this.k0=new f.Mm(4);this.gO=new f.DA;this.gP= new f.DA;this.kO=new f.AF;this.qN=this.pN=-1;this.Nx[0]=new f.Mm(6);this.Nx[1]=new f.Mm(6);this.Nx[2]=new f.Mm(6);this.Nx[3]=new f.Mm(6)};f.Lw.prototype.sxa=function(a){if(0>a)return!1;this.pN!==a&&(this.pN=a,this.qN=Math.max(this.pN,1),this.Mp.create(Math.max(this.qN,4096)));return!0};f.Lw.prototype.yxa=function(a,b,c){var d=1<<c;if(8<a||4<b||4<c)return!1;this.kO.create(b,a);this.gO.create(d);this.gP.create(d);this.Qja=d-1;return!0};f.Lw.prototype.Gg=function(){var a=4;this.Mp.Gg(!1);f.So(this.DZ, 192);f.So(this.HZ,192);f.So(this.IZ,12);f.So(this.JZ,12);f.So(this.KZ,12);f.So(this.LZ,12);f.So(this.l0,114);for(this.kO.Gg();a--;)this.Nx[a].Gg();this.gO.Gg();this.gP.Gg();this.k0.Gg();this.Lh.Gg()};f.Lw.prototype.Ge=function(a,b,c){var d=0,e=0,h=0,k=0,u=0,v=0,w=0;this.Lh.GU(a);this.Mp.GU(b);for(this.Gg();0>c||v<c;)if(a=v&this.Qja,0===this.Lh.ak(this.DZ,(d<<4)+a))w=this.kO.zqa(v++,w),w=7<=d?w.Coa(this.Lh,this.Mp.N3(e)):w.Boa(this.Lh),this.Mp.$va(w),d=4>d?0:d-(10>d?3:6);else{if(1===this.Lh.ak(this.IZ, d))w=0,0===this.Lh.ak(this.JZ,d)?0===this.Lh.ak(this.HZ,(d<<4)+a)&&(d=7>d?9:11,w=1):(0===this.Lh.ak(this.KZ,d)?b=h:(0===this.Lh.ak(this.LZ,d)?b=k:(b=u,u=k),k=h),h=e,e=b),0===w&&(w=2+this.gP.Ge(this.Lh,a),d=7>d?8:11);else if(u=k,k=h,h=e,w=2+this.gO.Ge(this.Lh,a),d=7>d?7:10,a=this.Nx[5>=w?w-2:3].Ge(this.Lh),4<=a)if(b=(a>>1)-1,e=(2|a&1)<<b,14>a)e+=f.Xwa(this.l0,e-a-1,this.Lh,b);else{if(e+=this.Lh.zoa(b-4)<<4,e+=this.k0.Wwa(this.Lh),0>e){if(-1===e)break;return!1}}else e=a;if(e>=v||e>=this.qN)return!1; this.Mp.boa(e,w);v+=w;w=this.Mp.N3(0)}this.Mp.flush();this.Mp.JK();this.Lh.JK();return!0};f.Lw.prototype.rxa=function(a){var b,c;if(5>a.size)return!1;b=a.Uh();c=b%9;b=~~(b/9);if(!this.yxa(c,b%5,~~(b/5)))return!1;b=a.Uh();b|=a.Uh()<<8;b|=a.Uh()<<16;b+=16777216*a.Uh();return this.sxa(b)};f.Doa=function(a,b){var c=new f.Lw,d;if(!c.rxa(a))throw"Incorrect stream properties";d=a.Uh();d|=a.Uh()<<8;d|=a.Uh()<<16;d+=16777216*a.Uh();a.Uh();a.Uh();a.Uh();a.Uh();if(!c.Ge(a,b,d))throw"Error in data stream";}; var h=1E-9,k=RegExp("^[+\\\\-]?[0-1]*[.]?[0-1]*$","gi");a.getUnifyJson=function(a){var b=[];if(!(a instanceof ArrayBuffer)){var d={status:3,building:{},floor:{},id:""};b.push(d);return b}new Uint8Array(a);a=new DataView(a);var h;h=4;var k=a.getInt16(h,!1);for(h+=2;0<k;){h+=4;var r=a.getUint8(h,!1);h+=1;for(var s=new ArrayBuffer(r),s=new Uint8Array(s),u=0;u<r;u++)s[u]=a.getUint8(h,!1),h+=1;r=c(s,0,r);h+=2;s=a.getInt8(h,!1);h+=1;0!==s&&(d={},d.status=s,d.building={},d.floor={},d.id=r,b.push(d));var v= a.getInt32(h,!1);h+=4;u=a.getInt32(h,!0);h+=4;v-=u;if(0!==u){for(var w=8*Math.ceil(u/8),d=u%8,w=new ArrayBuffer(w),t=new Int32Array(w),x=0;8<=u;){var y=a.getInt32(h,!0),F=a.getInt32(h+4,!0),y=y^2078870821,F=F^292664;t[x]=y;t[x+1]=F;x+=2;h+=8;u-=8}0!==u&&(y=a.getInt32(h,!0),F=a.getInt32(h+4,!0),y^=2078870821,F^=292664,t[x]=y,t[x+1]=F,h+=u);x=new Uint8Array(w);F=x.length;w=F-8+d;t=new Uint8Array(w);for(u=0;u<w;u++)t[u]=x[u];for(u=0;u<d;u++)t[w-d+u]=x[F-1-u];d={data:[],offset:0,bAa:function(a){this.data[this.offset++]= a}};f.Doa({data:t,offset:0,Uh:function(){return this.data[this.offset++]}},d);d=d.data;w=d.length;t=new ArrayBuffer(w);x=new Int8Array(t);for(u=0;u<w;u++)x[u]=d[u];d=e(t);d.status=s;d.id=r;b.push(d)}h+=v;k-=1}return b}}g.iW={Ija:a};a(g.iW)})();(function(){var a=g.iW,b=new g.JA(function(b){var d;(d=b?b.getUnifyJson:a.getUnifyJson)||console.error("getUnifyJson not found!!");return{ura:function(a,b){try{var c=d(a);b(null,c)}catch(k){b(k.message||k.toString())}}}},{clientId:"indoor",lazy:"untilCall",batchSend:!1,libPolyfills:[a.Ija]});g.jW={ky:function(){return b.ky()},jma:function(a){b.yu([a]);return b.ura.apply(b,arguments)}}})();g.Baa=g.da.extend({A:function(a){this.wc(a.map)},wc:function(a){this.map=a},RT:function(a){return this.ova(a)},ova:function(a){a=this.Cva(a);var b=[],c;if(a instanceof g.di)b=[a];else if(a instanceof g.Aa.Qe)c=new g.di,c.AU(a),b=[c];else if(this.isArray(a))for(var d,e,f=0,h=a.length;f<h;f+=1)if(d=a[f],e=e||d instanceof g.Aa.Qe)c=new g.di({zIndex:1,map:this.map,W:d,style:null}),c.name=d.ej+"-"+g.a.xb(c),b[f]=c;else{b=a;break}return b},Cva:function(a){if("FeatureCollection"===a.type){var b=a.features, c=b.length,d;a=Array(c);for(d=0;d<c;d+=1)a[d]=this.AT(b[d])}else a="Feature"===a.type?this.AT(a):"GeometryCollection"===a.type?this.iGa(a):this.AT({type:"Feature",W:a}).fc();return a},AT:function(a){var b=a.geometry,c=null,d=new g.di({zIndex:1,map:this.map});a.id&&(d.id=a.id);if(b){var e=b.type;switch(e){case "Point":c=this.wva(b);d.wB=!0;d.set("radius",2,!0);d.set("center",c.ii,!0);d.set("strokeWeight",0,!0);d.X("resolution",this.map);break;case "LineString":c=this.sva(b);break;case "Polygon":c= this.xva(b);break;case "MultiPoint":c=this.jGa(b);break;case "MultiLineString":c=this.tva(b);break;case "MultiPolygon":c=this.uva(b);break;default:throw Error("Bad geometry type: "+e);}c&&(c.ej=e.toLowerCase(),d.name=c.ej+"-"+g.a.xb(d));d.wa=a.properties;d.AU(c)}return d},pL:function(a){a[0][0]||console.log(a);var b=a.length,c,d=[];c=this.map.Ab(new g.U(a[0][0],a[0][1]));for(var e=c.x,f=c.y,h=c.x,k=c.y,l=0;l<b;l+=1)c=this.map.Ab(new g.U(a[l][0],a[l][1])),d[l]=[c.x,c.y],d[l][0]<e&&(e=d[l][0]),d[l][0]> h&&(h=d[l][0]),d[l][1]<f&&(f=d[l][1]),d[l][1]>k&&(k=d[l][1]);d.Bg=[e,f,h,k];return d},xva:function(a){var b=[];a=a.coordinates;for(var c=0;c<a.length;c+=1)b[c]=this.pL(a[c]);return new g.Aa.Ec(b)},wva:function(a){a=a.coordinates;a=new g.U(a[0],a[1]);var b=this.map.Ab(a),b=new g.Aa.Pg([b.x,b.y]);b.ii=a;return b},uva:function(a){a=a.coordinates;for(var b=a.length,c=[],d=0;d<b;d+=1){c[d]=[];for(var e=0;e<a[d].length;e+=1)c[d][e]=this.pL(a[d][e])}return new g.Aa.xp(c)},sva:function(a){a=this.pL(a.coordinates); return new g.Aa.rr(a)},tva:function(a){for(var b=a.coordinates.length,c=[],d=0;d<b;d+=1)c[d]=this.pL(a.coordinates[d]);return new g.Aa.Tw(c)},isArray:function(a){return g.a.isArray(a)}});(function(){var a={cons:{name:"",rank:0.20000000298023224,zoom_max:20,zoom_min:18},pubs:{name:"",rank:0.5,zoom_max:20,zoom_min:18},shops:{name:"",pid:"0",logo:"",area:1,rank:0.10000000149011612,height:0,shop_point_number:5,zoom_max:20,zoom_min:18}},b;for(b in a)a.hasOwnProperty(b)&&(a[b].Kl=b);var c={poitype:{},regiontype:{}},d=g.Qw.iT;g.Caa={Rna:function(b,f,h){f={Nt:f,rG:h};for(var k in b)if(b.hasOwnProperty(k)){h=b[k];var l=g.extend(d(f),a[k]);g.a.isArray(h)||(h=[h]);for(var m=0,n=h.length;m<n;m++){var p= h[m],q=h[m].properties,r=d(l),s=void 0;for(s in q)q.hasOwnProperty(s)&&q[s]!==r[s]&&(r[s]=q[s]);q=void 0;for(q in c)c.hasOwnProperty(q)&&r[q]&&(s=r[q].join("-"),c[q][s]||(c[q][s]=[].concat(r[q])),r[q]=c[q][s]);p.properties=r}}return b}}})();g.yF=g.da.extend({ka:[g.va],si:{loaded:20,Le:10,empty:0,Qna:-10,Rwa:-20},Xma:{pubs:"public",cons:"connection",shops:"shop"},Go:-9999,A:function(a){this.sa=a;this.ks=new g.Faa({size:g.l.size,l9:0.7,t3:2,k9:300});this.ks.h("drop",function(){});this.Wda=g.jW;this.BY=new g.Baa({map:a});this.Mh=g.zF;this.Wda.ky()},wc:function(a){this.sa=a;this.BY.wc(a)},forEach:function(){return this.ks.forEach.apply(this.ks,arguments)},$Ca:function(){this.ks.clear()},wta:function(a){for(var b=0,c=a.length;b<c;b++)this.US(a[b])}, lm:function(a,b){b=b||a.Tc||a.Go;var c=this.mq(a,b,!0),d=null;c?d=c.I:a.h2&&(d=a.h2.I);return d?new g.$f(d):null},DS:function(a){return a.Wr&&a.Wr>=this.si.loaded},A5:function(a,b){return this.JY(a,b)>=this.si.loaded},una:function(a,b,c){var d=b||a.Tc;if(d&&d!==this.Go){d=""+d;b=a.hI;for(var e=[a.ga,a.$u,a.Jy,a.dv],f=[a.UI,a.iR,a.hz],h=[],k=0,l=b.length;k<l;k++){var m=b[k],n=a.Jy[m];n<this.si.loaded&&n>=this.si.empty||h.push(""+m)}this.eY(e,function(a){a=""+a;return 0<=h.indexOf(""+a)&&a!==d});this.eY(f, function(a){var b=a.split("_"),b=b[0];return 0<=h.indexOf(b)&&0!==a.indexOf(d+"_"+(c?c:""))})}},eY:function(a,b){for(var c=0,d=a.length;c<d;c++)this.Zda(a[c],b)},Zda:function(a,b){var c=[],d;for(d in a)a.hasOwnProperty(d)&&c.push(d);d=0;for(var e=c.length;d<e;d++)b.call(this,c[d])&&delete a[c[d]]},JY:function(a,b){return a.Jy[b||a.Tc||a.Go]||this.si.empty},ES:function(a,b){return this.DS(a)&&this.A5(a,b)},Bda:function(a){for(var b=[],c=0,d=a.length;c<d;c++){var e=a[c];g.a.isArray(e)&&(e=new g.H(e[0], e[1]));b.push(this.sa.Od(e))}return b},Zea:function(a){a=a.fc();if(!a||!a.z4)return null;a=a.Vf;for(var b=[],c=0,d=a.length;c<d;c++)b.push(this.Bda(a[c].za));return b},M3:function(a){a=this.Th(a);if(!a)return null;a=a.Wp;if(!a)return null;a=a.wa;return a.name||a.name_cn},lqa:function(a){return(a=this.Th(a))?this.rR(a):null},rR:function(a,b){if(!a)return null;if(!a.XF){var c=a.Wp;if(!c)return null;var c=c.wa,d=g.Qw.iT(this.Mea(a));a.XF=g.extend(d,{id:c.pid,name:c.name||c.name_cn,lnglat:a.SS,floor_details:{floor_indexs:c.floor_indexs, floor_nonas:c.floor_nonas,floor_names:c.floor_names}})}g.extend(a.XF,{floor:a.Tc});b&&b.floorPath&&(c=(c=this.mq(a,a.Tc,!0))&&c.hm?this.Zea(c.hm):null,g.extend(a.XF,{floorPath:c}));return a.XF},jra:function(a,b,c){a=this.mq(a,b,!0);if(!a)return null;a=a.ga;b=null;for(var d=0,e=a.length;d<e;d++)if(a[d].wa.cpid===c){b=a[d];break}return this.$P(b)},Mea:function(a){var b=this;return{getAllShops:function(c){var d=b.mq(a,c||a.Tc,!0);c=[];if(!d)return c;for(var d=d.ga,e=0,f=d.length;e<f;e++)d[e].wa.cpid&& c.push(b.$P(d[e]));return c}}},xfa:function(a){var b=this;return{setCustomStyle:function(c,d){d=g.extend({autoRefresh:!0},d);a.iN=c?b.Mh.a2(c):null;d.autoRefresh&&b.q("featureStyleUpdate",{L:a});return this},getCustomStyle:function(){return b.Mh.RI(a.iN)},setCustomLabelStyle:function(c,d){d=g.extend({autoRefresh:!0},d);a.hN=c?b.Mh.a2(c):null;d.autoRefresh&&b.q("featureLabelStyleUpdate",{L:a});return this},getCustomLabelStyle:function(){return b.Mh.RI(a.hN)},setOptions:function(c,d){d=g.extend({autoRefresh:!0, replace:!0},d);a.rx=d.replace?c:g.extend({},a.rx,c);d.autoRefresh&&b.q("featureOptionsUpdate",{L:a});return this},disableIconRender:function(){this.setOptions({disableIconRender:!0},{replace:!1})},enableIconRender:function(){this.setOptions({disableIconRender:!1},{replace:!1})},disableLabelRender:function(){this.setOptions({disableLabelRender:!0},{replace:!1})},enableLabelRender:function(){this.setOptions({disableLabelRender:!1},{replace:!1})},getOptions:function(){return a.rx}}},$P:function(a){if(!a)return null; if(!a.Z0){var b=a.wa,c=b.font_anthor_point?new g.U(b.font_anthor_point[0],b.font_anthor_point[1]):null,d=b.Nt;c||(c=g.I.Ai(a.fc().Kd()),c=this.sa.Od(new g.H(c[0],c[1])));var e=g.Qw.iT(this.xfa(a));a.Z0=g.extend(e,{id:b.cpid,poiId:b.pid,building_id:d,name:b.name||b.name_cn,lnglat:c,category:this.Xma[b.Kl]})}return a.Z0},mq:function(a,b,c){if(!this.ES(a))return null;b=b||a.Tc;var d=null;a.ga?d=a.ga[b]:a.ga={};if(!d&&c){c=a.dv[b];if(!c)return console.warn("Missing geojson of floor",b,a),null;d=a.ga[b]= this.Kca(a,b,c);a.dv[b]=-1}return d},xT:function(a){for(var b=[Infinity,Infinity,-Infinity,-Infinity],c=0,d=a.length;c<d;c++){var e=a[c].fc();e&&g.I.extend(b,e.Kd())}return{ga:a,I:b,ee:[b[0],b[1]]}},Kca:function(a,b,c){b=this.xT(this.zX(c));c=b.ga;"floor"===c[0].wa.Kl&&(b.hm=c[0],b.ga=c.slice(1));a.I?g.I.extend(a.I,b.I):a.I=b.I;return b},tea:function(a){var b=a.wa,c=1,d=a.name.split("-"),d=d[0];switch(d){case "point":if(b.poitype&&this.Mh.D5(b.poitype)){a.Rba=1;return}break;case "polygon":break;case "multipolygon":break; default:console.warn("Unknown geoType",d)}switch(b.Kl){case "building":break;case "floor":c=2;break;case "shops":c=3;break;case "pubs":case "cons":c=3;break;default:console.warn("Unknown category",b.Kl)}a.zIndex=c},zX:function(a){a=this.BY.RT(a);for(var b=0,c=a.length;b<c;b++)a[b].Wm=b,this.tea(a[b]),a[b].Rba&&(a.splice(b,1),b--,c--);a.sort(function(a,b){var c=a.zIndex-b.zIndex;if(0!==c)return c;c=(a.wa.rank||0)-(b.wa.rank||0);return 0!==c?c:a.Wm-b.Wm});return a},Pfa:function(a){for(var b=[],c=0, d=a.length;c<d;c++)b.push(this.Qfa(a[c]));return b},Mca:function(a){var b=[],c=a.floor.floor;a.building.properties.Kl="building";c.properties.Kl="floor";b.push(c);a=a.floor;for(var c=["shops","pubs","cons"],d=0,e=c.length;d<e;d++)for(var f=a[c[d]],h=0,k=f.length;h<k;h++)b.push(f[h]);return{type:"FeatureCollection",features:b}},wfa:function(a){switch(a){case 2:return Error("Building not found!");default:return Error("Server error")}},Qfa:function(a){var b=a.id,c=this.Th(b);if(!c)return console.warn("Can not find: ", b),{error:Error("Can not find: "+b),result:c};if(0!==a.status)return{error:this.wfa(a.status),result:c};var d=a.floor.floor.properties.index;c.Go||(c.Tc=c.Go=d);c.w8=null;a.floor=g.Caa.Rna(a.floor,b,d);c.dv||(c.dv={});if(!c.Wp&&a.building){b=a.building;b.properties.Kl="building";var e=this.zX(b);c.h2=this.xT(e);c.Wp=e[0];c.hI=b.properties.floor_indexs}a.floor&&(c.Jy[d]>=this.si.loaded?console.warn("Floor alreay load!",d,c):(c.dv[d]=this.Mca(a,c),c.Jy[d]=this.si.loaded));a=c.Wp;if(!a)return console.log("Missing building geojson", c.dv),c.Wr=this.si.Qna,c;a=a.wa;c.SS||(c.SS=new g.U(a.centerPoint[0],a.centerPoint[1]));c.Wr=this.si.loaded;return{error:null,result:c}},$ja:function(a,b){b&&(a.an||(a.an=[]),a.an.push(b))},US:function(a,b,c){c=c||{};"string"===typeof a&&(a={id:a});var d=this.Th(a);d?d!==a&&g.extend(d,a):(d=g.extend({Wr:this.si.empty,Jy:{}},a),this.Wka(d));var e=this.wG(d);if(this.ES(d,e))return b&&setTimeout(function(){b(null,d)},0),!1;e=parseInt(e,10);if(isNaN(e))b&&b(Error("Floor should be an integer!"));else if(d.hI&& 0>d.hI.indexOf(e))b&&b(Error("Floor out of range, try these: "+d.hI));else{var f=this;a=!1;this.$ja(d,function(a,d){e===f.Go&&(e=f.wG(d));a||f.ES(d,e)?b&&b(a,d):e===f.wG(d)?c.exa?b&&b(Error("Floor request failed!"),null):f.US(d,b,g.extend({},c,{exa:!0})):b&&b(Error("Requested floor expired!"),null)});d.Wr<this.si.Le?(d.Wr=this.si.Le,a=!0):d.Wr===this.si.Le?a=!1:this.JY(d,e)<this.si.Le&&(d.Jy[e]=this.si.Le,a=!0);a&&this.hca([d])}},Th:function(a){if(0===a)return null;if(!a)return console.warn("Empty building!"), null;var b=a.id;b||"string"!==typeof a||(b=a);return this.ks.get(b)},twa:function(a){this.ks.yw(a)},Wka:function(a){return this.ks.set(a.id,a)},wG:function(a){return a.w8||a.Tc||a.Go||this.Go},hca:function(a){g.a.isArray(a)||(a=[a]);if(this.Rx)for(var b=this.Rx,c=0,d=a.length;c<d;c++){for(var e=a[c],f=!1,h=0,k=b.length;h<k;h++)e.id===b[h].id&&(f=!0,b[h]=e);f||b.push(e)}else this.Rx=[],this.Rx.push.apply(this.Rx,a);if(!this.x0){var l=this;this.x0=setTimeout(function(){l.x0=null;l.Zga(l.Rx);l.Rx.length= 0},0)}},kN:function(a,b){a&&b&&(b.Wr=this.si.Rwa,b.BO=g.a.hg()+3E3);if(b&&b.an){var c=b.an;b.an=null;for(var d=0,e=c.length;d<e;d++)c[d](a,b)}this.q(a?"loaded_error":"loaded",{error:a,data:b})},vfa:function(a){var b=g.r.Zd+"/v3/indoor/indoormaps?",c=[];c.push("poiid="+a.id);c.push("floor="+a.floor);c.push("version="+a.version);c.push("s=rsv3");c.push("key="+g.r.key);c.push.apply(c,["from=indoorH5Map","servicetype=unify","platform=JS","logversion=2.0","sdkversion="+g.r.nn,"appname="+g.r.Up]);return b+ c.join("&")},Uka:function(a){function b(b,c){b?e(b):g.a.isArray(c)?a.fya(d.Pfa(c)):e(Error("Indoor parser not return an array"))}var c=this.vfa(a),d=this,e=a.n3;setTimeout(function(){g.yF.ixa(c,b,a.n3)},0)},Ika:function(a){if(a&&a.length){for(var b=[],c=[],d=[],e=[],f=this,h,k=function(a){console.warn&&console.warn("\\u5ba4\\u5185\\u6570\\u636e\\u52a0\\u8f7d\\u89e3\\u6790\\u5931\\u8d25",a);for(var b=0,c=d.length;b<c;b++)f.kN(a,d[b])},l=0,m=a.length;l<m;l++){h=a[l].data;if(h.BO)if(g.a.hg()<h.BO){f.kN(Error("Holding errored request!"), h);continue}else h.BO=null;e.push(0);b.push(a[l].id);c.push(a[l].floor);d.push(h)}b.length&&this.Uka({version:e.join(";"),id:b.join(";"),floor:c.join(";"),n3:k,fya:function(a){for(var b=0,c=a.length;b<c;b++){var d=a[b];f.kN(d.error,d.result)}}})}},Zga:function(a){g.a.isArray(a)||(a=[a]);if(a.length){for(var b=[],c={},d=0,e=a.length;d<e;d++){var f=a[d];"string"===typeof f&&(f=this.Th(f));var f={data:f,id:f.id,floor:this.wG(f)},h=f.id+"_"+f.floor;c[h]?console.warn("Param duplicate",h):(c[h]=!0,b.push(f))}this.Ika(b)}}}); g.extend(g.yF,{ixa:function(a,b,c){var d=this.Gka;d||(this.Gka=d={});d[a]||(d[a]={ly:[]});var e=d[a].ly;e.push({succ:b,err:c});if(!d[a].jxa){d[a].jxa=!0;var f=new XMLHttpRequest,h=function(b,c){for(var f=0,h=e.length;f<h;f++)e[f][b]&&e[f][b].apply(this,c);d[a]=null;delete d[a]},k=function(){h("err",arguments)},l=function(a){g.jW.jma(a,function(a,b){h("succ",[a,b])})};f.onreadystatechange=function(){4===f.readyState&&(200!==f.status?k(Error("Status code not 200: "+f.status+"_"+f.statusText)):l(this.response))}; f.onerror=k;f.open("GET",a,!0);f.responseType="arraybuffer";f.send()}}});g.vp=g.o.ed.extend({A:function(a,b){g.vp.bd.A.apply(this,arguments);this.yB=!0;this.KA=new g.C.Hh(new B.C.Hh({innerOverlay:!0}),b);this.KA.Kb.set("bubble",!0)},oEa:function(){return this.KA},RH:function(a){g.vp.bd.RH.apply(this,arguments);a.wo=this.KA},am:function(a){this.La||(this.La=!0,this.S.q("complete"));return new g.vp.wW(this,a)}});g.vp.OV=B.o.ed.extend({A:function(){g.vp.OV.bd.A.apply(this,arguments);this.yB=!0},fg:function(a){return new g.vp(this,a)},kg:function(){}}); g.vp.wW=g.M.Yb.extend({A:function(){g.vp.wW.bd.A.apply(this,arguments)},pc:function(a){a=this.P=a.P;this.zoom=a.zoom;this.T=a.T},yj:function(){return[]}});g.lW=g.M.canvas.ed.extend({ka:[g.va],A:function(){g.lW.bd.A.apply(this,arguments)},Dwa:function(a){var b={},c=[],d,e,f;d=0;for(e=a.length;d<e;d++){var h=a[d];f=h.name.split("-")[0];h.style&&(h.style.ln?"polygon"!==f&&"multipolygon"!==f?console.warn("Not polygon"):(b[h.zIndex]||(b[h.zIndex]={zIndex:h.zIndex,y9:{}},c.push(b[h.zIndex])),f=b[h.zIndex].y9,f[h.style.ln]||(f[h.style.ln]=[]),f[h.style.ln].push(h)):console.warn("Style missing uid",h))}c.sort(function(a,b){return a.zIndex-b.zIndex});d=0;for(e= c.length;d<e;d++){f=c[d].y9;for(var k in f)f.hasOwnProperty(k)&&this.Cka(f[k])}},$ca:function(a,b){for(var c=null,d=0,e=b.length;d<e;d+=1){var f=this.lg(b[d]),f=[Math.round(f[0])+0.5,Math.round(f[1])+0.5];0<d?a.lineTo(f[0],f[1]):(c=f,a.moveTo(f[0],f[1]))}c&&a.lineTo(c[0],c[1])},Zca:function(a,b){for(var c=0,d=b.length;c<d;c+=1)this.$ca(a,b[c].za)},Yca:function(a,b){for(var c=0,d=b.length;c<d;c+=1)this.Zca(a,b[c].Vf)},Cka:function(a,b){b||(b=a[0].style);var c=this.zb,d=b.strokeColor,e=b.strokeWeight, f=b.strokeOpacity,h=b.fillColor,k=b.fillOpacity,l=b.strokeStyle,m=b.strokeDasharray,n,p;c.save();d&&(c.strokeStyle=d,e&&(c.lineWidth=e),c.lineCap="butt",c.lineJoin=b.lineJoin||"miter");h&&(c.fillStyle=h);c.beginPath();for(var e=0,q=a.length;e<q;e++){p=a[e].fc();if(p instanceof g.Aa.Ec||p.z4)p=[p];else if(p instanceof g.Aa.xp||p.S3)p=p.he;else{console.warn("Unknown geometry",p);continue}this.Yca(c,p)}c.closePath();h&&(k!==n&&(n=c.globalAlpha=k),c.fill());d&&(f!==n&&(c.globalAlpha=f),"dashed"===l&& c.setLineDash&&c.setLineDash(m),c.stroke());c.restore()},MK:function(a){return this.Dwa(a)}});g.Daa=g.da.extend({ka:[g.va],A:function(a,b){this.sa=a;this.Db=b;this.cga=g.a.bind(this.Wt,this);this.Mh=g.zF;this.a9(1);this.Aza=!0;this.U8();this.W8();this.sN=!1},a9:function(a){this.nh=a;this.vo=Math.log(this.nh)/Math.log(2)},U8:function(a){this.dga=a||new g.H(0,0)},W8:function(a){this.OZ=a||new g.H(0,0)},txa:function(a){this.sN=a},CEa:function(){return this.nh},Vga:function(a){return this.sa.Ab(a)},Wt:function(){},lH:function(a){a.canvas=a.canvas||a.Ba;this.Za&&this.Za.xa===a.canvas||(this.Za= new g.lW(a.canvas,this.cga));!1!==a.mh?g.g.Am(this.Za.xa,a.width,a.height,!0):a.width!==a.canvas.width?console.warn("width not match"):a.height!==a.canvas.height&&console.warn("height not match");this.Za.ee=a.ee;this.Za.T=a.T},YM:function(a,b,c,d){d=g.extend({split:!0,PU:!0,margin:{x:0,y:0}},d);c=c||a.Tc;this.Vva(a,c,b,d);if(!a.$u)return null;var e=a.$u[c];if(!e)return null;var e=e.LV[b],f=this.Db.mq(a,c,!0);if(!f)return null;c=e.labels;var h=e.gh;h<e.total&&(c=c.slice(0,e.gh));if(!c||!c.length)return null; var k=d.I||f.I,f=d.ee||f.ee,l=Math.pow(2,20-b),m=d.margin,n=Math.ceil((k[2]-k[0])/l)+2*m.x,k=Math.ceil((k[3]-k[1])/l)+2*m.y,f=[f[0]-m.x*l,f[1]-m.y*l];b={Sv:new g.Ok,zoom:b,T:l,ee:f,width:n,height:k};d.canvas&&(b.Ba=d.canvas);b=this.pP(b,{split:d.split,Iy:d.split?50:0,MI:d.split?50:0});k=0;for(f=b.length;k<f;k++){var p;d.vs&&g.a.isArray(d.vs)&&d.vs[k]&&(b[k].Ba=d.vs[k].Ba,g.g.Am(b[k].Ba,b[k].width,b[k].height,!0));b[k].Ba?(p=b[k].Ba,!0===d.mh&&g.g.Am(p,b[k].width,b[k].height,!0)):this.rB||(p=this.iG(), g.g.Am(p,b[k].width,b[k].height,!0),b[k].Ba=p);l=p?p.getContext("2d"):null;this.zka(c,g.extend({},b[k],{xD:!d.hT,canvas:p,cf:l}));h<e.total?g.extend(b[k],{status:0,gh:h,total:e.total}):(b[k].status=1,b[k].Sv=null)}d.hT&&(a.$u=null);return b},oY:function(a,b,c){c=g.extend({},c);var d=a.wa;return"label"===c.st&&(!(20===d.zoom_max&&20<b-this.vo)&&d.zoom_max&&b-this.vo>d.zoom_max||d.zoom_min&&b-this.vo<d.zoom_min)?!1:this.BE(a,b,c)?!0:!1},zN:function(a,b,c){if(a.filter)return a.filter(b,c);for(var d= [],e=0,f=a.length;e<f;e++)!1!==b.call(c,a[e],e)&&d.push(a[e]);return d},uea:function(a,b){if(!a)return a;var c=this.zN(a,function(a){return this.oY(a.L,b,{st:"label"})?(a=a.L.zh)&&(a.fontSize||a.ig)?!0:!1:!1},this);return c.length===a.length?a:c},pY:function(a,b){if(!a)return a;var c=this.zN(a,function(a){return 0>a.name.indexOf("polygon")||!this.oY(a,b,{st:"polygon"})||!a.style?!1:!0},this);return c.length===a.length?a:c},XX:function(a,b,c,d){d=g.extend({split:!0,margin:{x:10,y:10}},d);var e=d.I|| a.I,f=d.ee||a.ee,h=Math.pow(2,20-c),k=d.margin,l=Math.ceil((e[2]-e[0])/h)+2*k.x,e=Math.ceil((e[3]-e[1])/h)+2*k.y,f=[f[0]-k.x*h,f[1]-k.y*h];c=this.pP({zoom:c,T:h,ee:f,width:l,height:e},{split:d.split});f=0;for(h=c.length;f<h;f++)c[f].Ba=d.canvas||this.iG(),this.lH(g.extend({},c[f],{canvas:c[f].Ba,mh:d.mh})),this.Za.MK(b||a.ga);return c},Hda:function(a,b,c){var d=this.Db.xT(a);return d?this.XX(d,a,b,c):null},ZX:function(a,b,c,d){c=c||a.Tc;a=this.Db.mq(a,c,!0);return a&&a.hm?(c=this.pY([a.hm],b))&&c.length? this.XX(a,c,b,d):null:null},pP:function(a,b){b=g.extend({Iy:0,MI:0,maxWidth:b.split?g.l.ba?512:1536:9999999,maxHeight:b.split?g.l.ba?512:1536:9999999},b);for(var c=b.maxHeight,d=a.width,e=a.height,f=a.T,h=a.ee,k=Math.ceil(d/b.maxWidth),l=Math.round(d/k),c=Math.ceil(e/c),m=Math.round(e/c),n=[],p=0;p<k;p++)for(var q=0;q<c;q++){var r=p*l,s=Math.min(d,(p+1)*l),u=q*m,v=Math.min(e,(q+1)*m),w=[h[0]+r*f,h[1]+u*f],t=[h[0]+s*f,h[1]+v*f];n.push(g.extend({},a,{width:s-r+2*b.Iy,height:v-u+2*b.MI,ee:[w[0]-b.Iy* f,w[1]-b.MI*f],Rd:new g.$f([w[0]-b.Iy*f,w[1]-b.MI*f,t[0]+b.Iy*f,t[1]+b.Iy*f])}))}return n},sea:function(a,b){return this.zN(a,function(a){a.VX||(a.VX=new g.$f(a.fc().Kd()));return b.Rd.ah(a.VX)?!0:!1})},YX:function(a,b,c,d){c=c||a.Tc;var e=this.Db.mq(a,c,!0);if(!e)return null;var f=this.pY(e.ga,b);if(!f||!f.length)return null;this.q("willRenderFloorPolygonFeatures",{zoom:b,floor:c,LCa:a,ga:f});d=g.extend({split:!0,PU:!0,margin:{x:10,y:10}},d);c=d.I||e.I;var e=d.ee||e.ee,h=Math.pow(2,20-b),k=d.margin, l=Math.ceil((c[2]-c[0])/h)+2*k.x;c=Math.ceil((c[3]-c[1])/h)+2*k.y;e=[e[0]-k.x*h,e[1]-k.y*h];b={zoom:b,T:h,ee:e,width:l,height:c};d.canvas&&(b.Ba=d.canvas);b=this.pP(b,{split:d.split});c=0;for(e=b.length;c<e;c++)h=this.sea(f,b[c]),h.length&&(g.extend(b[c],{status:0,ga:h,gh:0,total:h.length}),d.vs&&g.a.isArray(d.vs)&&d.vs[c]&&(b[c].Ba=d.vs[c].Ba,g.g.Am(b[c].Ba,b[c].width,b[c].height,!0)),d.PU||!b[c].Ba?this.nla(b[c],a,b[c].total+1):(this.lH(g.extend({},b[c],{mh:d.mh})),this.Za.MK(h)));return b},Cea:function(a){a.Lp&& (a=a.Lp);var b=a.ga.slice(0,a.gh);this.PX(a);a.Ba=this.iG();this.lH({mh:!0,canvas:a.Ba,width:a.width,height:a.height,zoom:a.zoom,ee:a.ee,T:a.T});this.Za.MK(b);return a.Ba},PX:function(a){a.gh>=a.total&&(a.status=1,a.ga=null)},afa:function(){this.vY||(this.vY=g.a.bind(this.Cea,this));return this.vY},nla:function(a,b,c){c||(c=g.l.ba?300:1E3);b=a.gh;c=Math.min(b+c,a.total);var d=a.ga;b>=c||!d?a.status=1:(a.gh=c,a.Ba?"function"!==typeof a.Ba&&(this.lH(g.extend({},a,{mh:!1})),this.Za.MK(d.slice(b,c)), this.PX(a)):a.Ba=this.afa(),b=!0,a.gh<a.total?(a.Fp||(a.Fp=0),a.gh-a.Fp<a.total/5&&(b=!1)):a.status=1,b&&!0!==a.O6&&a.Fp!==a.gh&&(a.Fp=a.gh,this.q("render",{type:"floor"})))},vG:function(a,b){return a+"_"+b},y4:function(a,b){if(!a)return null;if(a.zoom===b)return a;g.a.isArray(a)||(a=[a]);for(var c=[],d=0,e=a.length;d<e;d++)c.push(g.extend({},a[d],{Lp:a[d],width:Math.round(a[d].width*Math.pow(2,b-a[d].zoom)),height:Math.round(a[d].height*Math.pow(2,b-a[d].zoom))}));return c},Aea:function(a,b,c){if(!c)return null; a=a.Tc;b=Math.round(b);var d=b-2,e,f;for(e=b;20>=e;e++)if(f=this.vG(a,e),c[f])return c[f];for(e=b;e>=d;e--)if(f=this.vG(a,e),c[f])return c[f];return null},iG:function(){this.HM||(this.HM=1);var a=document.createElement("canvas");a.id="amap_indoor_c_"+this.HM;this.HM++;return a},$M:function(a,b){var c=this.iG();this.vZ=c;c.width=Math.max(300,a);c.height=Math.max(300,b);c.lG={x:0,y:0,wh:0};return c},rha:function(a,b,c){a=a.lG;a.x+=b;a.wh=Math.max(a.wh,c)},zea:function(a,b){var c=this.vZ;c||(c=this.$M(a, b));for(var d=c.lG,d=[{x:d.x,y:d.y,wh:Math.max(d.wh,b)},{x:0,y:d.y+d.wh,wh:b}],e=0,f=d.length;e<f;e++){var h=d[e];if(h.x+a<c.width&&h.y+b<c.height)return g.extend(c.lG,h),c}return this.$M(a,b)},kda:function(a,b){var c=this.wZ;this.wZ||(c=this.wZ=(this.vZ||this.$M(100,12)).getContext("2d"));var d=this.O0(c,b);return[Math.ceil(c.measureText(a).width)+1,d.fontSize+3]},O0:function(a,b){var c=b.fontSize*this.nh,d=b.strokeColor,e=b.fillColor;a.lineWidth=2;a.font="400 "+c+\'px "Microsoft YaHei"\';a.textBaseline= "bottom";a.textAlign="start";a.strokeStyle=d;a.fillStyle=e;return{fontSize:c}},Fga:function(a){var b=[a.width,a.height],c=a.style,d=a.text,e=[3,3],e=[b[0]+e[0],b[1]+e[1]],f=this.zea(e[0],e[1]);if(!f)return console.error("No canvas got!"),null;var h=f.getContext("2d"),k=f.lG;this.O0(h,c);h.textBaseline="bottom";c.strokeColor&&h.strokeText(d,k.x,k.y+b[1],b[0]);c.fillColor&&h.fillText(d,k.x,k.y+b[1],b[0]);g.extend(a,{x:k.x,y:k.y,style:null,text:null});a.Ba=f;this.rha(f,e[0],e[1]);return f},hfa:function(){this.NZ|| (this.NZ=g.a.bind(this.Fga,this));return this.NZ},Jda:function(a,b){if(!b.fontSize)return{Ba:null,width:0,height:0};var c=this.kda(a,b),c={style:b,text:a,width:c[0],height:c[1],uT:c[0],tT:c[1]};c.Ba=this.hfa();return c},Ida:function(a,b){b=b||a.Tc;var c=this.Db.mq(a,b,!0);if(!c)return null;var d=[],e=[];a.Wp&&(d.push(a.Wp),c.hm&&(a.Wp.RM=g.I.Ai(c.hm.fc().Kd())));c.hm&&d.push(c.hm);d.push.apply(d,c.ga);for(var c=0,f=d.length;c<f;c++){var h=d[c],k=h.wa,l=h.fc().Kd();if(!k.poitype||!this.Mh.D5(k.poitype)){if(!h.RM&& k.font_anthor_point){var m=this.Vga(k.font_anthor_point);h.RM=[m.x,m.y]}k.rank||k.building_poi_style&&(k.rank=10);e.push({coords:h.RM||g.I.Ai(l),mE:k.rank||0,L:h,wa:h.wa})}}e.sort(function(a,b){var c=b.mE-a.mE;if(0!==c)return c;var c=a.L.zh,d=b.L.zh,e=0,f=0;c&&d&&(c.ig&&(e=1),d.ig&&(f=1));return f-e});return{LV:{},labels:e}},ola:function(a,b,c,d){d||(d=g.l.ba?300:1E3);b=a.LV[c];var e=b.gh;d=Math.min(e+d,b.total);var f=b.labels;if(e>=d||!f)b.status=1;else{for(;e<d;e++){var h=f[e].L;if(!f[e].mF)f[e].mF= h.gCa={};else if(f[e].mF[c])continue;this.BE(h,c,{st:"label"});var k=h.wa.name||h.wa.name_cn,l=h.zh;if(l){k=this.Jda.call(this,k,l);h=l.lz||[c];l.ig&&(k.ig=l.ig);for(var l=0,m=h.length;l<m;l++)f[e].mF[parseInt(h[l],10)+this.vo]=k}else console.warn("No style",f[e])}b.gh=d;c=!0;b.gh<b.total?(b.Fp||(b.Fp=0),b.gh-b.Fp<b.total/5&&(c=!1)):b.status=1;c&&!0!==a.O6&&b.Fp!==b.gh&&(b.Fp=b.gh,this.q("render",{type:"label"}))}},Rca:function(a,b){var c=a.LV,d=c[b];d||(d=this.uea(a.labels,b),d=c[b]={total:d.length, labels:d,status:0,gh:0});d.gh===d.total&&(d.status=1)},Vva:function(a,b,c){if(b=b||a.Tc){a.$u||(a.$u={});var d=a.$u;d[b]||(d[b]=this.Ida(a,b));this.Rca(d[b],c);this.ola(g.extend({},d[b],{O6:!0}),a,c,999999999);return d[b]}},lB:function(a,b,c,d){var e=a.Tc;if(!e)return null;var f=Math.round(b)+this.vo,e=d.Ny?d.Ny.call(this,e,f):null,h=d.BD,k=e&&h?h[e]:null;(!k||k.yM)&&c&&(k=d.MC.call(this,a,f,k?{vs:k}:null))&&(k.yM&&(k.yM=null),e&&(h[e]=k));return k?f===b?k:this.y4(k,b):d.y3?(a=this.Aea(a,b,h),this.y4(a, b)):null},Qqa:function(a,b,c){b=b.zoom;a.hz||(a.hz={});return this.lB(a,b,c,{BD:a.hz,Ny:this.vG,MC:function(a,b,c){return this.YM(a,b,a.Tc,c)}})},ER:function(){var a;this.zr&&(a=this.zr.SG);return a||0},Rqa:function(a,b){this.aga();var c=Math.round(b.zoom)+this.vo;a.hz||(a.hz={});this.YM(a,c,a.Tc);c=this.nka();if(0<this.ER())return[];if(b.Ha){for(var d=[],e=0,f=c.length;e<f;e++){var h=c[e].za;h&&b.Ha.contains(new g.H(h[0],h[1]))&&d.push(c[e])}c=d}return c},Iqa:function(a,b,c){b=b.zoom;a.iR||(a.iR= {});return this.lB(a,b,c,{y3:!0,BD:a.iR,Ny:function(b,c){return b+"_"+c+(a.rH?"_sel":"")},MC:function(a,b){return this.ZX(a,b,a.Tc)}})},q3:function(a,b){if(a){b=g.extend({HC:!0},b);var c=[a.UI];b.HC&&(c.push(a.hz),a.$u=null);for(var d=0,e=c.length;d<e;d++){var f=c[d];if(f)for(var h in f)f.hasOwnProperty(h)&&(f[h].yM=!0)}}},Hqa:function(a,b,c){b=b.zoom;a.UI||(a.UI={});return(a=this.lB(a,b,c,{y3:!0,BD:a.UI,Ny:this.vG,MC:function(a,b,c){return this.YX(a,b,a.Tc,c)}}))?a:null},Gqa:function(a,b,c,d){return this.lB(a, b.zoom,!0,{BD:{},Ny:null,MC:function(a,b){return this.Hda(d.ga,b,g.extend({hT:!0,split:!1,canvas:d.canvas},d.w))}})},wN:function(a,b,c,d){var e=b.Ha,f=e.kc,h=e.Vd;return this.lB(a,b.zoom,!0,{BD:{},Ny:null,MC:function(a,b){return d.tS.call(this,a,b,a.Tc,g.extend({hT:!0,margin:{x:0,y:0},split:!1,canvas:c,I:[f.x,f.y,h.x,h.y],ee:[f.x,f.y],PU:!1},d.w))}})},apa:function(a,b,c,d){return this.wN(a,b,c,{tS:this.YM,w:d})},Zoa:function(a,b,c,d){return this.wN(a,b,c,{tS:this.ZX,w:d})},Yoa:function(a,b,c,d){return this.wN(a, b,c,{tS:this.YX,w:d})},AN:function(a,b,c,d,e,f,h){c*=e;d*=e;e=h.call(this,{Jm:c,wh:d,rJ:c/2,Vy:d/2,T:e});h=0;for(var k=e.length;h<k;h++){var l=[b[0]+e[h][0],b[1]+e[h][1]],l=[l[0],l[1],l[0]+c,l[1]+d];if(!f||(!a||a.contains(new g.$f(l)))&&!f.search(l).length)return l}return null},ufa:function(a,b,c){var d=Math.ceil((a[0]-b[0])/c);b=Math.ceil((a[1]-b[1])/c);var e=Math.round((a[2]-a[0])/c);a=Math.round((a[3]-a[1])/c);return{width:e,height:a,x:d,y:b}},aga:function(){this.rB=!0;this.QN=[]},nka:function(){this.rB= !1;var a=this.QN;this.QN=null;return a},Qca:function(a,b,c){b=a.wa;if(!b)return console.warn(a),null;var d=b.name||b.name_cn,e=b.pid,f=a.coords,h=[];a.LS&&h.push({source:a,Rd:a.LS});a.mS&&h.push({Fsa:!0,source:a.ce?a.ce:a,Rd:a.mS});a=[];for(var k=[],l=0,m=h.length;l<m;l++){var n=h[l].source;a.push(n.Ba||n.$ra);n=[Math.round((h[l].Rd[0]-f[0])/c),Math.round((h[l].Rd[1]-f[1])/c),n.width,n.height,n.x||0,n.y||0,n.uT||n.width,n.tT||n.height];h[l].Fsa&&(n.AZ=!0);k.push(n)}return{za:f,name:d,Ws:e,zIndex:1E4, Cd:Infinity,nk:!0,margin:2,id:b.cpid||e,jDa:b.cpid,Da:a,aa:k}},vN:function(a,b,c,d,e,f,h){if(this.rB){if(c.Ba){"function"===typeof c.Ba&&(c.Ba(c.Lp||c,{Rd:d,T:e,ee:f}),c.Lp&&(c=g.extend({},c,c.Lp)));var k=this.Qca(c,d,e);k&&this.QN.push(k)}}else{k=this.ufa(d,f,e);if(c.Ba){"function"===typeof c.Ba&&(c.Ba(c.Lp||c,{Rd:d,T:e,ee:f,Sa:k,canvas:a}),c.Lp&&(c=g.extend({},c,c.Lp)));if(c.Ba){var l=!0;if(h){var m=new g.$f(0,0,a.width,a.height),n=new g.$f(k.x,k.y,k.x+c.width,k.y+c.height);m.contains(n)||(l=!1)}l&& b.drawImage(c.Ba,c.x||0,c.y||0,c.uT||c.width,c.tT||c.height,k.x,k.y,c.width,c.height)}return k}if(c.an){var p=this,k=c.an,q=Array.prototype.slice.call(arguments,0);q.push(1);k.push(function(a,b){a||(g.extend(q[1],b),p.vN.apply(this,q))})}}},ux:function(a,b,c){return[a[0]-b[0]*c,a[1]-b[1]*c,a[2]+b[0]*c,a[3]+b[1]*c]},Dka:function(a,b){if(a.L.zh){var c=a.L.zh.TX,d=a.coords,e=this.wR(a.L,"labelSizeOffset")||this.OZ,f=Math.max(0<a.width?1:0,a.width+e.xf()),h=Math.max(0<a.height?1:0,a.height+e.te()),e= f-a.width,k=h-a.height,d=this.AN(b.xD?b.Rd:null,d,f,h,b.T,c?b.Sv:null,function(a){return[[-a.rJ,-a.Vy],[0,-a.Vy],[-a.Jm,-a.Vy]]});if(!d)return!1;c&&b.Rd.ah(new g.$f(d))&&b.Sv.Gs(this.ux(d,[1,1],b.T),a);d=this.ux(d,[e/2*-1,k/2*-1],b.T);a.LS=d;this.vN(b.canvas,b.cf,a,d,b.T,b.ee,b.xD);return!0}},yka:function(a,b){var c=a.ce;if(!c)return!1;if(a.L.zh){var d=a.L.zh.TX,e=a.coords,f=this.wR(a.L,"iconSizeOffset")||this.dga,h=Math.max(0<c.width?1:0,c.width+f.xf()),k=Math.max(0<c.height?1:0,c.height+f.te()), f=h-c.width,l=k-c.height,m=this.AN(b.xD?b.Rd:null,e,h,k,b.T,d?b.Sv:null,function(a){return[[-a.rJ,-a.Vy]]});if(!m)return!1;var n=this.wR(a.L,"labelSizeOffset")||this.OZ,p=Math.max(0<a.width?1:0,a.width+n.xf()),q=Math.max(0<a.height?1:0,a.height+n.te()),n=p-a.width,r=q-a.height,s=null;0<p*q&&(s=this.AN(b.xD?b.Rd:null,e,p,q,b.T,d?b.Sv:null,function(a){return[[-a.rJ,(0+k/2)*a.T],[(0+h/2)*a.T,-a.Vy],[-a.Jm-(0+h/2)*a.T,-a.Vy],[-a.rJ,-a.wh-(0+k/2)*a.T]]}));e=[];m&&(d&&b.Rd.ah(new g.$f(m))&&b.Sv.Gs(this.ux(m, [0,0],b.T),c),m=this.ux(m,[f/2*-1,l/2*-1],b.T),a.mS=m,c.wa=a.wa,c.mS=m,c.coords=a.coords,c.AZ=!0,this.rB&&s||e.push([c,m]));s&&(d&&b.Rd.ah(new g.$f(s))&&b.Sv.Gs(this.ux(s,[0,0],b.T),a),s=this.ux(s,[n/2*-1,r/2*-1],b.T),a.LS=s,e.push([a,s]));this.rB&&1<e.length&&console.warn("More than one image with _imageRenderingHolded");c=0;for(d=e.length;c<d;c++)this.vN(b.canvas,b.cf,e[c][0],e[c][1],b.T,b.ee,b.xD)}},OY:function(a){return g.r.Fb+"/images/indoor_icon/"+(1<this.nh?"36/"+a+"@2x":"18/"+a)+".png"},cea:function(a, b){var c=this.OY(a),d=document.createElement("img");d.crossOrigin="Anonymous";d.onload=function(){d.loaded=!0;b(null,this);d.onload=d.onerror=null};d.onerror=function(a){b(a,this);d.onload=d.onerror=null};d.src=c},dfa:function(a){this.zr||(this.zr={SG:0});var b=this.zr[a];if(!b){var b=this.zr[a]={status:1,ig:a,width:18*this.nh,height:18*this.nh,$ra:this.OY(a),an:[]},c=this;this.zr.SG++;this.cea(a,function(a,e){c.zr.SG--;if(!a&&(b.Ba=e,b.uT=e.width,b.tT=e.height,b.an)){var f=b.an;b.an=null;for(var h= 0,k=f.length;h<k;h++)f[h].call(c,null,b)}c.zr.SG||c.q("render",{type:"icon"})})}return b},zka:function(a,b){if(a.length)for(var c=0,d=a.length;c<d;c++)if(a[c].mF){var e=a[c].mF[b.zoom];if(e){!this.sN&&e.ig&&(e.ce=this.dfa(e.ig));var f=!this.sN&&e.ce?this.yka:this.Dka;a[c].h0||(a[c].h0=new g.H(a[c].coords[0],a[c].coords[1]));b.Rd.contains(a[c].h0)&&(a[c].L&&this.BE(a[c].L,b.zoom,{st:"label"}),f.call(this,g.extend({Lp:e},a[c],e),b))}}},Mpa:function(a){if(a.rx){var b=a.rx;b.disableIconRender&&a.zh&& a.zh.ig&&(a.zh=g.extend({},a.zh,{ig:null}));b.disableLabelRender&&a.zh&&(a.zh=g.extend({},a.zh,{fontSize:0}))}},wR:function(a,b){return a&&a.rx?a.rx[b]:null},BE:function(a,b,c){c.st||console.warn("triggerType not set");g.extend({st:"polygon"},c);b-=this.vo;c=a.wa;var d=c.poitype||c.building_poi_style;d&&(a.zh=this.Mh.r4(d,b));a.hN&&(a.zh=this.Mh.z6(a.zh,a.hN));if(c.highlighted_floor_line_style)(d=this.Db.Th(c.Nt))?a.style=this.Mh.BR(d.rH?c.highlighted_floor_line_style:c.unhighlighted_floor_line_style, b):console.warn("Can not load: ",c);else if(c=c.regiontype||c.floor_region_type)a.style=this.Mh.era(c,b);a.iN&&(a.style=this.Mh.z6(a.style,a.iN));this.Mpa(a);if(!a.style&&!a.zh)return!1;1!==this.nh&&a.style&&a.style.strokeWeight&&(a.style=this.Mh.gJ(a.style),a.style.strokeWeight*=this.nh);return!0}});g.kW=g.da.extend({ka:[g.va,g.$e],w:{visible:!0,zooms:[18,20],floorBarContainerStyle:null,floorListContainerStyle:null},A:function(a){g.a.tb(this,a);this.j={};this.hP();this.setOptions(this.w);this.GY()},setOptions:function(a){this.kf(a)},show:function(){this.setOptions({visible:!0})},hide:function(){this.setOptions({visible:!1})},visibleChanged:function(){var a=this.get("visible");g.g.$a(this.j.K,{display:a?"block":"none"});a&&(a=this.j.K.eo)&&this.$B(a)},floorDataChanged:function(){var a=this.get("floorData"); this.kka(a)},Dga:function(){return!!this.get("visible")},xu:function(a,b){this.map=a;b.appendChild(this.j.K);this.wf=b;this.fn()},Uv:function(){this.mn();this.wf.removeChild(this.j.K);this.j={};this.map=this.wf=null},fn:function(){this.Va={};for(var a="click mouseover mouseout mousedown mouseup touchstart touchend touchcancel mousewheel".split(" "),b=0,c=a.length;b<c;b++)this.Va[a[b]]=g.event.Y(this.j.K,a[b],this.Mfa,this)},QM:function(a){if(a){var b=this;setTimeout(function(){a.call(b,b.YF)},0)}}, GY:function(a){if(this.YF)this.QM(a);else{var b=function(a){a.TG&&(clearTimeout(a.TG),a.TG=null);a.TZ&&a.nO&&(a.nO.apply(this,arguments),a.TZ=!1)},c={"mousewheel DOMMouseScroll":{"*":function(a,b){g.F.stopPropagation(b);var c=0;b.wheelDelta?(c=120,g.l.oz&&(c=120===Math.abs(b.wheelDelta)?400:240),c=b.wheelDelta/c,window.opera&&g.a.Sh(window.opera.version)&&9.5>parseFloat(window.opera.version())&&(c=-c)):b.detail&&(c=-b.detail);this.nha(c)}},mousedown:{"floor-nav":function(a){a.mO=!1;var b=arguments, c=this;a.TG=setTimeout(function(){a.TG=null;a.mO=!0;a.oO&&(a.oO.apply(c,b),a.TZ=!0)},1E3)}},mouseup:{"floor-nav":function(){b.apply(this,arguments)}},mouseover:{"floor-nav":function(a){g.g.Wa(a,"hover")}},mouseout:{"floor-nav":function(a){g.g.eb(a,"hover");b.apply(this,arguments)}},click:{"floor-plus":function(a){a.mO||this.e_(1)},"floor-minus":function(a){a.mO||this.e_(-1)},"floor-nonas":function(a){this.Dea(a.parentNode)}}};if(g.l.ba&&g.l.Yf){var d=this;this.Xx=!0;g.sb.load("AMap.IndoorMapTouch", function(){d.YF=c;d.qga();d.QM(a)})}else this.YF=c,this.QM(a)}},Mfa:function(a){var b=a.target||a.target||a.srcElement,c=a.type;if(b){var d=[b,a];this.GY(function(a){for(var f in a)if(a.hasOwnProperty(f)&&!(0>f.split(" ").indexOf(c))){var h=a[f],k;for(k in h)("*"===k||g.g.Cn(b,k))&&h[k].apply(this,d)}})}},FN:function(a,b){var c=this.j.K.Eea,d=c.indexOf(a);if(0>d)console.warn("Can not found floor: ",a,c);else if(d+=b,!(0>d||d>=c.length))return{id:d,av:c[d]}},e_:function(a){(a=this.FN(this.j.K.eo,a))&& this.wP(a.av)},nha:function(a){0<a?this.xP(null,!0):this.yP(null,!0)},Dea:function(a){a.xr!==this.j.K.eo&&this.wP(a.xr)},wP:function(a){this.sla("floorChanged",{av:a,Co:this.j.K.Dp})},sla:function(a,b){this.q(a,b)},mn:function(){this.gC();if(this.Va)for(var a in this.Va)this.Va.hasOwnProperty(a)&&g.event.removeListener(this.Va[a])},Xca:function(){var a=document.createElement("div");a.className="floor-btn floor-nav floor-plus";a.innerHTML="+";a.oO=function(){this.xP()};a.nO=function(){this.gC()};return a}, Tca:function(){var a=document.createElement("div");a.className="floor-btn floor-nav floor-minus";a.innerHTML="-";a.oO=function(){this.yP()};a.nO=function(){this.gC()};return a},WBa:function(){return this.j.K.eo},VBa:function(){return this.j.K.Dp},qG:function(a){var b=null;this.BN(function(c){if(c.xr===a)return b=c,!1});return b},T8:function(a,b,c){if(this.j.K.Dp===a){a=this.qG(b);if(!a)return!1;this.jca(a,!c);c&&this.$B(b)}},jca:function(a,b){if(!a)return!1;var c=this.xea(a,"amap-indrm-loader");b? c&&c.parentNode.removeChild(c):c||(c=document.createElement("div"),c.className="amap-indrm-loader",a.appendChild(c));this.xo(a,"with-indrm-loader",!b);this.xo(this.j.K,"with-indrm-loader",!b);return!0},xea:function(a,b){var c=null;this.xY(a,function(a){if(g.g.Cn(a,b))return c=a,!1},b);return c},xY:function(a,b,c){a=Array.prototype.slice.call(a.childNodes,0);for(var d=0,e=a.length;d<e;d++){var f=a[d];if(f&&(!c||g.g.Cn(f,c))&&!1===b.call(this,f,d))break}},BN:function(a){this.xY(this.j.ws,a,"floor-list-item")}, Dxa:function(a,b){this.j.K.Dp!==a?console.warn("building id not match"):(this.BN(function(a){this.xo(a,"selected",a.xr===b)}),this.j.K.eo=b,this.mka(),this.$B(b))},cka:function(a){var b=a.offsetLeft,c=a.offsetTop;do if(a=a.offsetParent)b+=a.offsetLeft,c+=a.offsetTop;else break;while(1);return{left:b,top:c}},$F:function(a){if(!a.getBoundingClientRect)return this.cka(a);a=a.getBoundingClientRect();var b=document.documentElement;return{top:a.top+b.scrollTop,left:a.left+b.scrollLeft}},ZF:function(a){return a.offsetHeight|| a.clientHeight||0},xga:function(a){var b=document.body;if(b.contains)return b.contains(a);for(;a;){if(a===b)return!0;a=a.parentNode}return!1},xP:function(a,b){if(g.g.Cn(this.j.K,"can-scroll-up")){var c=this.j.K;a||(a=c.J0||c.eo);var d=this.FN(a,1);if(d&&(this.$B(d.av),!b)){this.gC();var e=this;e.FH=setTimeout(function(){e.xP(d.av)},170)}}},yP:function(a,b){if(g.g.Cn(this.j.K,"can-scroll-down")){var c=this.j.K;a||(a=c.J0||c.eo);var d=this.FN(a,-1);if(d&&(this.$B(d.av),!b)){var e=this;this.gC();e.FH= setTimeout(function(){e.yP(d.av)},170)}}},gC:function(){this.FH&&(clearTimeout(this.FH),this.FH=null)},QBa:function(a){return g.Qw.GQ(a)},qX:function(a,b){if(!g.l.ba)return g.Qw.N1(a,b)},SY:function(a){return this.$F(a).top-this.$F(this.j.ws).top},RY:function(a,b){var c=this.qG(a);if(!c)return!1;var d=this.ZF(this.j.ws),e=this.ZF(this.j.hR),f=this.ZF(c),c=this.SY(c)-e/2+f/2;b=g.extend({eT:this.Xx?-f:0,cT:d-e+(this.Xx?f:0)},b);return{ita:d,Kma:e,eT:b.eT,cT:b.cT,F9:c}},$B:function(a){if(this.Dga()){var b= this.qG(a);if(!b)console.warn("Can not find floor: ",a);else if(this.xga(b)){var b=this.j.ws,c=this.RY(a),d=this.Xx||c.ita>c.Kma;this.xo(this.j.K,"can-scroll",d);this.j.K.J0=a;d&&(a=c.F9,d=c.eT,c=c.cT,a<d?a=d:a>c&&(a=c),d=-parseInt(b.style.marginTop,10)||0,5<Math.abs(d-a)&&(this.qX(b),b.style.marginTop=-a+"px"),d=-parseInt(b.style.marginTop,10)||0,this.xo(this.j.K,"can-scroll-down",d<c),this.xo(this.j.K,"can-scroll-up",0<d));this.I0()}}},I0:function(a){if(!this.Xx){arguments.length||(a=this.j.K.eo); var b=this.qG(a);if(!b)return!1;var c=this.j.hR,d=this.j.ws;this.qX(this.j.yU);var e=this.$F(c).top-this.$F(this.j.K).top,b=e+this.SY(b)+(parseInt(d.style.marginTop,10)||0);this.j.yU.style.top=b+"px";this.j.yU.style.display=b>this.ZF(c)+e+5||b<e-15?"none":""}},mka:function(){var a=this.j.K,b=a.eo,c=a.iha;this.xo(this.j.K7,"disabled",b===a.gha);this.xo(this.j.C6,"disabled",b===c)},xo:function(a,b,c){a&&(c?g.g.Wa:g.g.eb).call(g.g,a,b)},hP:function(){if(this.j.K){var a=this.j.K;a.innerHTML="";a.className= "amap-indoormap-floorbar-control";a.Dp=null}else this.j.K=g.g.create("div",null,"amap-indoormap-floorbar-control")},kka:function(a){var b=this.j.K;a?(a.id!==b.Dp&&this.Lca(a),b.eo=a.Tc,this.Dxa(b.Dp,b.eo)):this.hP()},N0:function(a,b){b?a.setAttribute("title",b):a.removeAttribute("title")},Lca:function(a){this.hP();var b=this.j.K;this.xo(b,"is-mobile",!!g.l.ba);this.xo(b,"touch-scroll",this.Xx);var c=a.Ppa,d=c.Qpa,e=c.jR.length,f=e>(this.Xx?Infinity:5),h=document.createDocumentFragment(),k=g.g.create("div", h,"panel-box");this.N0(b,c.name_cn);this.j.yU=g.g.create("div",k,"select-dock");f&&(this.j.K7=this.Xca(),k.appendChild(this.j.K7));var l=document.createElement("ul");l.className="floor-list";for(var m=e-1;0<=m;m--){var n=document.createElement("li");n.className="floor-list-item";n.innerHTML=\'<div class="floor-btn floor-nonas">\'+c.Rpa[m]+"</div>";n.xr=c.jR[m];0===m?b.iha=n.xr:m===e-1&&(b.gha=n.xr);this.N0(n,d[m]);l.appendChild(n)}b.lCa=0;b.kCa=e-1;b.Eea=[].concat(c.jR);c=document.createElement("div"); c.className="floor-list-box";c.appendChild(l);k.appendChild(c);f&&(this.j.C6=this.Tca(),k.appendChild(this.j.C6));b.Dp=a.id;b.appendChild(h);this.j.ws=l;this.j.hR=c;this.oca()},oca:function(){var a={floorBarContainer:this.j.K,floorListContainer:this.j.hR},b;for(b in a)if(a.hasOwnProperty(b)){var c=this.get(b+"Style");c&&this.pca(a[b],c)}},pca:function(a,b){if(a)for(var c in b)b.hasOwnProperty(c)&&(a.style[c]=b[c])}});B.o.Aaa=B.o.Yb.extend({A:function(){var a=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};this.CLASS_NAME="AMap.IndoorMap";g.c.ya(this,a);if(!g.l.kl)return null;this.Vb=a;this.Xt=!1},mapChanged:function(){var a=this;if(!this.Xt&&void 0===this.eha){var b="3D"===this.get("map").get("viewMode")&&g.l.qp?"3D":"2D",c=function(){var c="3D"===b?B.o.Ht:B.o.zaa;a.A=a.initialize=c.prototype.A;g.a.Bxa(a,c.prototype);c.call(a,a.Vb);a.Vb=null;a.Xt=!0};"3D"===b?g.sb.load("AMap.IndoorMap3D",c):c();this.eha= !0}}});window.AMap.IndoorMap=B.o.Aaa; B.o.SL={w:{visible:!0,opacity:1,zIndex:11,featureszIndex:null,zooms:[17,25],hideFloorBar:!1,bubble:"true",alwaysShow:!1,disableIconRender:!1,disableLabelRender:!1,disableHoverMarker:!1,autoLoadBuildingsInTile:!0},A:function(a){var b=this;this.CLASS_NAME="AMap.IndoorMap";g.c.ya(this,a);this.LAYER_NAME="IndoorLayer";if(!g.l.kl)return null;this.MG=0;this.fP=!g.l.ba;this.yx=g.g.create("div");this.rZ=g.g.create("div",this.yx,"floor-outline-image-con");this.sB=g.g.create("div",this.yx,"floor-image-con"); this.TN=g.g.create("div",this.yx,"highlight-image-con");this.FG=g.g.create("div",this.yx,"label-image-con");this.constructor.bd.A.call(this,this.yx,a);g.g.Wa(this.yx,"amap-indoor-map");this.cg=new B.C.ub({innerOverlay:!0,offset:new g.H(0,0),content:" ",noSelect:!0,visible:!1});this.cg.Ca=!0;this.sa=this.kB();this.zc=null;this.Db=this._dataMgr=new g.yF(this.sa);this.Db.h("loaded",function(){b.uo()},this);this.Db.h("featureStyleUpdate",this.s_,this);this.Db.h("featureLabelStyleUpdate",this.q_,this); this.Db.h("featureOptionsUpdate",this.r_,this);this.tX=1;this.bj=void 0;this.Mh=g.zF;this.Xda=this.Mh.gJ({strokeColor:"rgba(224,180,135,1)",fillColor:"rgba(224,180,135,0.5)"});this.Xt=!0;this.sa&&this.mapChanged();this.SP=this.getRenderLabels;g.a.xb(this)},setzIndex:function(a){g.c.add(this,"setzIndex");this.constructor.bd.setzIndex.apply(this,arguments);this.jo&&this.jo.setzIndex(this.get("featureszIndex")||a)},b7:function(a){this.OB(a.i2)},D$:function(){return!!this.get("autoLoadBuildingsInTile")}, showIndoorMap:function(a,b,c,d){g.c.add(this,"showIndoorMap");var e=this;if(this.lI()){var f=arguments[arguments.length-1],h=null;f&&"function"===typeof f&&(h=f);h===b&&(b=null);h===c&&(c=null);this.UU(a,b,function(a,b,f){if(!a){var n=(e.get("zooms")||[18,20])[0],n=Math.max(e.sa.get("zoom"),n),p=b.SS,q=null;c&&(q=e.Db.jra(b,b.Tc,c));q&&q.lnglat&&(p=q.lnglat);d||e.sa.setZoomAndCenter(n,p,!0);e.lI()&&e.uo();e.tu(b);q&&(f.shop=q)}g.event.O(e,"floor_complete",f);h&&h(a,f)},{c$:!1})}},showFloor:function(a, b){g.c.add(this,"showFloor");if(!this.Wl)return!1;this.showIndoorMap(this.Wl,a,void 0,b)},showFloorBar:function(){g.c.add(this,"showFloorBar");this.set("hideFloorBar",!1)},hideFloorBar:function(){g.c.add(this,"hideFloorBar");this.set("hideFloorBar",!0)},hideFloorBarChanged:function(){this.mu()},featureszIndexChanged:function(){this.jo&&this.jo.setzIndex(this.get("featureszIndex")||this.get("zIndex"))},visibleChanged:function(){var a=this.constructor.bd.visibleChanged;a&&a.apply(this,arguments);this.bP()}, disableLabelRenderChanged:function(){this.uo()},hideLabels:function(){g.c.add(this,"hideLabels");this.set("disableLabelRender",!0)},showLabels:function(){g.c.add(this,"showLabels");this.set("disableLabelRender",!1)},cursorChanged:function(){this.mP(this.get("cursor"))},mP:function(a){this.qf&&this.qf.KA.Kb.set("cursor",a)},getSelectedBuildingId:function(){g.c.add(this,"getSelectedBuildingId");return this.Wl||null},getSelectedBuilding:function(a){g.c.add(this,"getSelectedBuilding");var b=this.Wl|| null;return b?(b=this.Db.Th(b))?this.Db.rR(b,a):null:null},kg:function(){this.zc&&(this.zc.nb=[]);this.fY()},s_:function(a){this.refreshFloorStyle(a.L.wa.Nt,{HC:!1})},q_:function(a){this.refreshFloorStyle(a.L.wa.Nt,{HC:!0})},r_:function(a){this.refreshFloorStyle(a.L.wa.Nt,{HC:!0})},refreshFloorStyle:function(a,b){if(this.Db){b=g.extend({HC:!0},b);if(a)this.Pd.q3(this.Db.Th({id:a}),b);else{var c=this;this.Db.forEach(function(a){c.Pd.q3(a,b)})}this.dG();this.uo()}},iconSizeOffsetChanged:function(){this.Pd&& (this.Pd.U8(this.get("iconSizeOffset")),this.refreshFloorStyle())},disableIconRenderChanged:function(){this.Pd&&(this.Pd.txa(this.get("disableIconRender")),this.refreshFloorStyle())},labelSizeOffsetChanged:function(){this.Pd&&(this.Pd.W8(this.get("labelSizeOffset")),this.refreshFloorStyle())},mapChanged:function(){if(this.Xt){var a=this.kB();this.zc&&this.sa===a||(this.constructor.bd.mapChanged.apply(this,arguments),this.fY(),this.sa=a,this.zc=this.Pea(),this.Ym()?this.rca():!this.sa||this.zc||this.z1|| (this.z1=!0,this.sa.h("coreMapCreated",function(){this.z1=!1;this.mapChanged()},this,!0)))}},fY:function(){this.sa&&(this.sa.G("mousemove",this.EB,this),this.sa.G("zoomchange",this.rO,this),this.sa.G("movestart",this.YZ,this),this.sa.G("mapmove",this.ZZ,this),this.sa.G("moveend",this.XZ,this),this.sa.G("dragstart",this.WZ,this),this.sa.G("dragend",this.VZ,this),this.sa.G("click",this.UG,this),this.sa.G("dblclick",this.UZ,this));this.Tk&&(this.sa&&this.sa.removeControl(this.Tk),this.Tk=null);this.qf&& (this.qf.clear(),this.ska(),this.qf=null);this.Pd&&this.Pd.G("render",this.oH,this);this.bj=!0;g.Pj&&(g.Pj.G("vecTileParsed.builds.found",this.b7,this),g.Pj.V8(!1,this.sa));this.tx(null);this.cg.setMap(null);this.mu();this.zc=this.sa=null;this.dG()},rca:function(){this.sa.h("zoomchange",this.rO,this);this.sa.h("moveend",this.XZ,this);this.sa.h("mapmove",this.ZZ,this);this.sa.h("movestart",this.YZ,this);this.sa.h("dragstart",this.WZ,this);this.sa.h("dragend",this.VZ,this);this.sa.h("click",this.UG, this);this.sa.h("dblclick",this.UZ,this);this.sa.h("mousemove",this.EB,this);this.rO();this.bP();this.MA();this.Db.wc(this.sa);"IndoorLayer"===this.LAYER_NAME&&(this.jo=new g.vp.OV({zIndex:this.get("featureszIndex")||this.getzIndex(),map:this.sa,innerLayer:!0}),this.qf=this.jo.o,this.fca());g.Pj&&this.D$()&&g.Pj.h("vecTileParsed.builds.found",this.b7,this);this.cursorChanged();this.Pd=new g.Daa(this.sa,this.Db);this.Pd.a9(g.l.Kc?2:1);this.Pd.Aza=this.fP;this.Pd.h("render",this.oH,this);this.mu(); this.Nfa();this.disableHoverMarkerChanged();this.iconSizeOffsetChanged();this.labelSizeOffsetChanged();this.disableIconRenderChanged()},disableHoverMarkerChanged:function(){this.cg&&this.cg.setMap(this.bj||this.get("disableHoverMarker")?null:this.sa)},ska:function(){this.jO(!1);var a=this.jo;setTimeout(function(){a.setMap(null)},0);this.qf=this.jo=null},fca:function(){this.jo.setMap(this.sa);this.qf=this.jo.o;this.jO(!0)},jO:function(a){if(this.qf){var b=this.qf.KA,c=this.get("indoorEvents")||[]; g.a.isArray(c)?(0>c.indexOf("click")&&c.push("click"),g.l.ba||(0>c.indexOf("mouseover")&&c.push("mouseover"),0>c.indexOf("mouseout")&&c.push("mouseout"))):c=c.split(" ");a=a?b.h:b.G;for(var d=0,e=c.length;d<e;d++)a.call(b,c[d],this.Ifa,this)}},rO:function(){if(this.Ym()){var a=this.sa.get("zoom");if(g.l.ba){var b=this,c=a+this.Pd?this.Pd.vo:0;this.Db.forEach(function(a){b.uda(a.id,c)})}this.qf&&this.qf.M&&Math.floor(a)===a&&this.qf.M.zoom!==a&&(this.qf.M.zoom=a,this.qf.M.T=this.sa.pj.oq(a));this.mu({V4:!0}); this.bP()}},yZ:function(a,b){if(!a)return!1;"object"!==typeof a&&(a=this.Db.Th({id:a}));var c=this.JN(),d=this.Db.lm(a);if(b&&this.sa&&"IndoorLayer"===this.LAYER_NAME){var e=this.sa.getResolution();b=b.Nd(e);c=new g.$f(c.kc.add(b),c.Vd.ab(b))}return c&&d?c.ah(d,0):!1},uda:function(a,b){var c=this.Db.Th({id:a});this.yZ(c)||this.OX(a,b)},OX:function(a,b){var c=this.Db.Th({id:a});c&&this.Db.una(c,void 0,b)},$N:function(){return 300>g.a.hg()-this.MG},ZZ:function(){this.MG=g.a.hg()},YZ:function(){this.MG= g.a.hg()},XZ:function(){this.MG=0;this.mu({V4:!0})},sca:function(){var a=this.getVisibleBuildingIds();a&&1===a.length&&this.setSelectedBuildingId(a[0])},WZ:function(){this.CZ=!0},VZ:function(){this.CZ=!1},bga:function(){this.mZ=!0;var a=this;setTimeout(function(){a.mZ=!1},0)},UG:function(){this.mZ||(this.q("map_click"),this.Yda({id:0},200))},UZ:function(){this.lQ()},Yda:function(a,b){var c=this;this.lQ();this.oG=setTimeout(function(){c.oG=null;c.tu(a)},b||300)},lQ:function(){this.oG&&(clearTimeout(this.oG), this.oG=null)},bP:function(){var a=!this.Ym()||!this.get("visible");if(!a&&this.sa)var a=this.sa.get("zoom"),b=this.get("zooms"),a=a<b[0]||a>b[1];this.bj!==a&&(this.dG(),this.bj=a,g.Pj&&g.Pj.V8(!this.bj,this.sa),this.disableHoverMarkerChanged(),this.jO(!this.bj),this.mu(),this.bj&&(this.tx(null),this.KH(null)),this.oH());this.MA()},setSelectedBuildingId:function(a){g.c.add(this,"setSelectedBuildingId");this.tu({id:a})},tu:function(a){this.lQ();if(this.Wl!==a.id){if(this.Wl){var b=this.Db.Th(this.Wl); b&&(b.rH=!1,this.OX(b.id))}this.q("selectedBuildingIdChanged",{oldId:this.Wl,newId:a.id});this.Wl=a.id;if(a=this.Db.Th(a.id))a.rH=!0;this.uo()}this.mu()},MA:function(){if(this.sa&&!g.l.ba)for(var a=this.sa.get("zoom"),b=[this.sa],c=!this.bj&&this.RB&&0<this.RB.length,d=0,e=b.length;d<e;d++)if(b[d]){var f=b[d].get("zooms");f&&(c?20>f[1]&&(b[d].set("zooms",[f[0],20]),b[d].ava=f[1]):18<f[1]&&a<f[1]&&b[d].set("zooms",[f[0],b[d].ava||f[1]]))}},$ea:function(a){if(!this.Wl)return!1;var b=this.Db.Th(this.Wl); return!b||!b.dv||a&&a.V4&&!this.yZ(b,new g.H(30,30))?!1:{id:b.id,Tc:b.Tc||b.Go,Ppa:this.Nca(b.Wp.wa)}},Nca:function(a){return g.extend({},a,{jR:a.floor_indexs,Rpa:a.floor_nonas,Qpa:a.floor_names})},lga:function(){var a=this.Tk;a&&(a.h("floorChanged",function(a){this.UU(a.Co,a.av,function(){})},this),a.h("visible",function(){a&&this.q("floorBarVisibleChanged",{PDa:a,visible:a.get("visible")})},this))},getFloorBar:function(){return this.Tk},getFeaturesLayer:function(){return this.jo},mu:function(a){!this.Ym()|| this.get("hideFloorBar")||this.bj?this.Tk&&this.Tk.hide():(a=this.$ea(a),this.Tk||(this.Tk=new g.kW(this.get(g.l.ba?"floorBarOptionsForMobile":"floorBarOptions")),this.lga(),this.sa.D=!0,this.sa.addControl(this.Tk),this.sa.D=!1),this.Tk.set("floorData",a),a?this.Tk.show():this.Tk.hide())},eja:function(a){var b=a.su;if(!b)return null;var c=b.wa;if(!c)return null;var d=null;c.cpid&&(d=this.Db.$P(b));return{building_id:c.Nt,floor:c.rG,lnglat:a.Tf||a.lnglat,shop:d}},EB:function(a){a=a.Tf||a.lnglat;a&& this.AB&&a.gb(this.AB)||(this.AB=a,this.dY(a))},dY:function(a,b){function c(){d.lN=null;d.xO&&a?(d.cg.show(),d.cg.setPosition(a)):d.cg.hide()}this.lN&&clearTimeout(this.lN);this.cg.get("visible")&&this.cg.hide();var d=this;b?c():this.lN=setTimeout(c,100)},tx:function(a,b,c){this.get("disableIndoorMouseoverHighlight")&&(a=null);var d=null;this.Hx=null;a&&(a.wa?a.wa.pid||("floor"===a.wa.Kl&&(a=this.Db.M3(a.wa.Nt))&&(d=a),a=null):a=null);a&&!d&&(d=a.wa.name||a.wa.name_cn);if(d)for(var e=["\\u8f85\\u52a9\\u9762"], f=0,h=e.length;f<h;f++){if(0<=d.indexOf(e[f])){a=d=null;break}}else a=null;if(a)switch(a.wa.Kl){case "shops":this.Hx=a}this.cg&&(d?(this.xO!==d&&(this.xO=d,this.cg.setContent(\'<div class="amap-indoor-map-moverf-marker">\'+d+"</div>")),this.dY(c.Tf||c.lnglat,!0)):(this.xO=null,this.cg.hide(),this.cg.setContent("")));this.Hka(b)},Hka:function(a){this.FV&&g.a.ui(this.FV);this.FV=g.a.Yc(function(){this.FV=null;this.B0(a)},this)},Ifa:function(a){if(this.bj)console.warn("Layer is hidden");else{var b=this.eja(a); if(!b)this.tx(null),b=null;else if(b.building_id){a.UBa=!0;a.type||(a.type=a.type);var c=b.building_id,d="click"===a.type,e="mouseover"===a.type,f="mouseout"===a.type;if(d||e)d&&this.bga(),this.Wl!==c&&this.tu({id:b.building_id});e?(this.mP("default"),this.tx(a.su,c,a,b)):f&&(this.mP(this.get("cursor")),this.tx(null))}g.event.O(this,a.type,b||a)}},oH:function(a){this.lP&&clearTimeout(this.lP);var b=this;this.lP=setTimeout(function(){b.lP=null;b.uo()},a||100)},fg:function(){if(!this.Xt)return null; var a=this.constructor.bd.fg.apply(this,arguments),b=this;setTimeout(function(){b.mapChanged()},0);return a},kB:function(){return this.get("map")},Pea:function(){var a=this.kB();return a?a.map:null},TBa:function(){var a=this.kB();return a?g.Pj.z3(a):null},SBa:function(a,b){var c=this.sa.getResolution(),d=this.sa.Ab(this.sa.get("center")),e=b.Ai(),f=this.sa.get("size"),h=Math.abs(d.y-e.y)/c;return Math.abs(d.x-e.x)/c>3*f.width||h>3*f.height},CN:function(){if(this.bj||!this.Ym())return[];var a=this.JN(), b=[],c=[];a&&this.Db.forEach(function(c){if(this.Db.DS(c)){var d=this.Db.lm(c);d&&a.ah(d,0)&&b.push(c.id)}},this);if(c.length)for(var d=0,e=c.length;d<e;d++)this.Db.twa(c[d]);return b},uo:function(){this.Dw||(this.wE=g.a.Yc(this.M0,this),this.Dw=!0)},IY:function(a){return a.Go||a.Tc||1},Ym:function(){return!(!this.sa||!this.zc)},Cla:function(a){if(this.Ym()){var b=this;setTimeout(function(){a.call(b)},0)}else this.SB||(this.SB=[]),this.SB.push(a)},Nfa:function(){if(this.SB){var a=this.SB;this.SB= null;for(var b=0,c=a.length;b<c;b++)a[b].call(this)}},OB:function(a){this.Ym()&&!this.bj&&(a||this.D$()&&(a=g.Pj.kqa(this.sa)),a&&a.length&&this.Db.wta(a))},UU:function(a,b,c,d){d=g.extend({c$:!0},d);var e=this;if(this.Ym()){var f=!1,h=this.Tk,k=this.Db.Th(a);h&&(k&&this.Db.A5(k,b)||(f=!0),f&&h.T8(a,b,!0));var l=function(b,e){var f;f=b?{status:1,error:b}:{status:0,building:this.Db.rR(e)};g.extend(f,{id:a});!1!==d.c$&&g.event.O(this,"floor_complete",f);c&&c.call(this,b,e,f)};this.Db.US({id:a,w8:b}, function(c,d){!c&&b&&(d.Tc=b);f&&h.T8(a,b,!1);c?l.call(e,c,d):(e.tx(null),e.uo(),e.tu(d),l.call(e,null,d))})}else{var m=Array.prototype.slice.call(arguments,0);this.Cla(function(){this.UU.apply(this,m)})}},Eka:function(a){return!this.Ym()||a&&a.lHa&&(a=this.zc,a.vg||a.gj||a.Of&&this.$N())?!1:!0},M0:function(){this.zc&&this.zc.set("display")},lI:function(){var a=this.sa;if(a&&a.map){if(this.get("alwaysShow"))return!0;a.D=!0;a.getLayers();a.D=!1;for(var b in a.map.la)if(g.o.hi&&a.map.la[b]instanceof g.o.hi)return!0;return!1}},render:function(a){if(this.lI())if(this.wE&&g.a.ui(this.wE),this.Dw=!1,this.OB(),this.Eka()){var b=this.vx();b.yi=a;this.F0=this.tX++;this.yla(b.Tr,b);this.vka(b.Tr,b);this.VA(this.rZ);this.VA(this.sB);this.VA(this.TN);this.VA(this.FG);this.KH(b.Tr);this.MA()}else this.oH(500)},dG:function(){this.BB=null},getRenderLabels:function(){if(!this.Ym()||this.get("disableLabelRender")||this.bj||0<this.Pd.ER())return this.dG(),[];var a=this.vx(),b=[];if(this.BB&&this.BB.result.cja=== this.get("opacity")&&(this.BB.Mza===a.key||this.$N()||this.CZ))b=this.BB.result;else{var c=a.Tr,b=[];b.iI=[];for(var d=0,e=c.length;d<e;d++){var f=c[d];f.Tc||(f.Tc=this.IY(f));var h=this.Pd.Rqa(f,a),k=this.get("opacity");g.a.Tb(h,function(a){a.floor=f.Tc;a.opacity=k});b.push.apply(b,h);b.iI.push(f.Wp.W)}b&&0<b.length&&0===this.Pd.ER()&&(b.cja=this.get("opacity"),this.BB={Mza:a.key,result:b})}b.SFa=this.CN();return b},getVisibleBuildingIds:function(){g.c.add(this,"getVisibleBuildingIds");return this.RB|| []},getBuildingInfoById:function(a){return this.Db.lqa(a)},KH:function(a){var b=[];if(a&&!this.bj)for(var c=0,d=a.length;c<d;c++)this.Db.DS(a[c])&&b.push(a[c].id);b.sort();a=this.RB||[];this.RB=b;g.Pj&&g.Pj.wxa(b,this.sa);a.join(",")!==b.join(",")&&(this.q("visibleBuildingChanged",{oldIds:a,newIds:this.RB}),this.sca())},vx:function(){for(var a=this.CN(),b=[],c=[],d=[],e=0,f=a.length;e<f;e++){var h=this.Db.Th(a[e]);h?(b.push(h),d.push(h.id),c.push(h.id+"_"+h.Tc+(h.rH?"_sel":""))):console.warn("Can not find bld: ", a[e])}c.sort();var k;this.Ym()?(a=this.JN(),e=this.sa.get("zoom"),k=this.sa.get("viewMode")):(a=new g.$f(0,0,0,0),e=0);return{Kf:k,Tr:b,NCa:d,Ha:a,zoom:e,key:e+";"+a.toString()+";"+c.join(",")}},yla:function(a){var b,c,d=[];b=0;for(c=a.length;b<c;b++)d.push(a[b].id+"_"+a[b].Tc);b=d.sort().join(";");if(this.qf.Ala!==b){this.qf.Ala=b;this.qf.clear();var e=this;this.qf.sP&&g.a.eQ(this.qf.sP);this.qf.sP=g.a.pU(function(){e.qf&&(e.qf.sP=null,e.jka(a))},{timeout:20})}},jka:function(a){for(var b=[],c=0, d=a.length;c<d;c++){var e=a[c];if(e=this.Db.mq(e,e.Tc,!0))e.hm&&b.push(e.hm),b.push.apply(b,e.ga)}this.qf.ay(b)},JN:function(){var a=this;if(!this.sa)return null;var b=this.sa.get("coordsBound");if("IndoorLayer3D"===this.LAYER_NAME){if(!b)return{};b.ah=function(c){var d=[],e=c.Vd;c=c.kc;var f=[new g.H(c.x,c.y),new g.H(e.x,c.y),new g.H(e.x,e.y),new g.H(c.x,e.y),new g.H(c.x,c.y)];g.a.Tb(b.path,function(b){b=new g.H(b[0],b[1]);d.push(a.sa.p20ToLngLat(b))});g.a.Tb(f,function(b,c){f[c]=a.sa.p20ToLngLat(b)}); return g.Ft.doesPolygonPolygonIntersect(d,f)}}return b},Cda:function(a,b){if(0===parseInt(this.sa.get("rotation"),10)%360)return this.sa.Xd(a,b);var c=this.sa;a=a.cb();var d=c.Od(a),e=c.get("center");-180>e.R-d.R?a.x-=g.a.Fa:180<e.R-d.R&&(a.x+=g.a.Fa);d=c.get("centerCoords");d=a.ab(d).kd(1<<20-b);c=c.get("size").PE().kd(2);e=d.x*Math.cos(0)-Math.sin(0)*d.y;d=Math.sin(0)*d.x+Math.cos(0)*d.y;return c.add(new g.H(e,d))},C0:function(a,b,c){if(!a)console.warn("Empty image");else if(g.a.isArray(a))for(var d= 0,e=a.length;d<e;d++)this.C0(a[d],b,c);else if(!a.Rd||c.Lza.ah(a.Rd,0)){var f=a.Ba;"function"===typeof f&&(f=f(a));f&&(f.gd=this.F0,d=a.ee,d=this.Cda(new g.H(d[0],d[1]),c.zoom),a={position:"absolute",width:Math.round(a.width)+"px",height:Math.round(a.height)+"px",left:Math.ceil(d.x)+"px",top:Math.ceil(d.y)+"px"},g.extend(f.style,a),f.parentNode!==b&&(b.appendChild(f),c.Bz&&!g.l.ba&&(f.style.opacity=c.Bz,g.Qw.N1(f,1E3),setTimeout(function(){f.style.opacity=1},0))))}},G0:function(a,b,c){g.g.Am(a,b|| a.width,c||a.height,!0)},wka:function(a,b,c){this.uu?c.mh&&this.G0(this.uu):(this.uu=document.createElement("canvas"),this.sB.appendChild(this.uu));this.Wx?c.mh&&this.G0(this.Wx):(this.Wx=document.createElement("canvas"),this.FG.appendChild(this.Wx));c=[{Zu:this.Pd.Zoa,K:this.sB,CQ:[a,b,this.uu,{mh:c.mh}]},{Zu:this.Pd.Yoa,K:this.sB,CQ:[a,b,this.uu,{mh:!1}]},{disable:this.get("disableLabelRender")||b.yi&&b.yi.hU,Zu:this.Pd.apa,K:this.FG,CQ:[a,b,this.Wx,{mh:c.mh}]}];this.dP(a,b,c)},dP:function(a,b, c){for(var d=0,e=c.length;d<e;d++)if(!c[d].disable){var f=c[d].CQ||[a,b,!0];c[d].s3&&f.push.apply(f,c[d].s3);(f=c[d].Zu.apply(this.Pd,f))&&this.C0(f,c[d].K,{MCa:a.id,Bz:c[d].Bz,Lza:b.Ha,zoom:b.zoom})}},B0:function(a,b){"string"===typeof a&&(a=this.Db.Th(a));b||(b=this.vx());var c=!0;a&&!this.$N()&&this.Hx||(c=!1);this.Hx&&c&&(this.Pd.BE(this.Hx,b.zoom+this.Pd.vo,{st:"polygon"}),this.Hx.style||(c=!1));c?(this.jZ||(this.jZ=document.createElement("canvas")),c=this.get("shopHighlightCoverStyle")||this.Xda, c.ln||(c.ln="highlight"),c=[{Zu:this.Pd.Gqa,s3:[{canvas:this.jZ,ga:[g.extend(new g.di,this.Hx,{style:c})]}],K:this.TN,Bz:0.1}],this.dP(a,b,c)):this.VA(this.TN,-1)},xka:function(a,b){var c=[{Zu:this.Pd.Iqa,K:this.rZ},{Zu:this.Pd.Hqa,K:this.sB,Bz:0.1},{disable:this.get("disableLabelRender")||b.yi&&b.yi.hU,Zu:this.Pd.Qqa,K:this.FG,Bz:0.1}];this.dP(a,b,c);g.l.ba||this.B0(a,b)},Ela:function(a,b){this.sa.D=!0;var c=this.sa.getResolution(null,b.zoom);this.sa.D=!1;var d=8E5;"undefined"!==typeof screen&&screen.width&& screen.height&&(d=screen.width*screen.height*1.3);for(var e=0,f=a.length;e<f;e++){var h=this.Db.lm(a[e]);if(h){var k=h.zj()/c,h=h.wj()/c;if(k*h>d)return!0}}return!1},vka:function(a,b){var c=this.fP;c&&this.Ela(a,b)&&(c=!1);for(var d=0,e=a.length;d<e;d++){var f=a[d];f.Tc||(f.Tc=this.IY(f));c?this.xka(f,b):this.wka(f,b,{mh:0===d})}},VA:function(a,b){if(a){b=b||this.F0;for(var c=Array.prototype.slice.call(a.childNodes,0),d=c.length-1;0<=d;d-=1){var e=c[d];e&&e.gd!==b&&a.removeChild(e)}}}};B.o.zaa=B.o.Fl.extend(B.o.SL); ')