<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<title></title>
	</head>
	<style type="text/css">
		*{
			margin: 0;padding: 0;
		}
		.magnifier .left .mask{
			/*遮罩场*/
			width: 100%;
			height: 100%;
			position: absolute;
			left: 0;
			top: 0;
			background-color: black;
			opacity: 0.4;
		}
		.magnifier .left{
			width: 250px;height: 150px;
			float:left;
			position: relative;
		}
		
		.magnifier .left img{
			width: 250px;height: 150px;
		}
		
		.magnifier .float{
			width: 50px;height: 50px;
			background-color: hotpink;
			opacity: 0.5;
			position: absolute;
			left: 0;
			top: 0;
		}
		
		.magnifier .right{
			width: 200px;height: 200px;
			background-image: url(imgs/big.png);
			float:left;
			margin-left:50px ;
		}
	</style>
		

	<script src="js/jquery.js" type="text/javascript" charset="utf-8"></script>
	<script type="text/javascript">
		$(function(){
			(function($){
				$.fn.extend({
					magnifier:function(){
						this.each(function(){
							var that = this;
							$('.left',this).mousemove(function(evt){
								var x = evt.offsetX;
								var y = evt.offsetY;
								var float = $('.float',this);
								x = x - float.width()/2;
								y = y - float.height()/2;
								//溢出
								if(x<0){
									x=0;
								}
								if(y<0){
									y=0;
								}
								if(x > $(this).width()-float.width()){
									x=$(this).width()-float.width();
								}
								//由于已经选择了.left，这里只写this即可，否则会弹出
								if(y > $(this).height()-float.height()){
									y=$(this).height()-float.height();
								}
								
								
								float.css({
									left:x,
									top:y
								});
								
								$('.right',that).css({
									backgroundPosition: x * -4 + 'px' + y * -4 + 'px'
								})
								
							}).mouseover(function(){
								
							}).mouseout(function(){
								
							})
						})
						
					}
				})
			})(jQuery)
			
			$('.magnifier').magnifier();
			
			
		})
		
	</script>
	<div class="magnifier">
		<div class="left">
			<img src="imgs/small.png" >
			<div class="float"></div>
			<div class="mask"></div>
		</div>
		<div class="right"></div>
	</div>
	<body>
	</body>
</html>
